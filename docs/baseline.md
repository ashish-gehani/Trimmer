Baseline Binaries for Benchmarks
=============================================

We have created baseline binaries for each benchmark to compare the code size reduction and performance against the corresponding specialized binaries generated by **Trimmer**. The baseline binaries for each example can be generated as follows:

1. Benchmarks are provided in the [examples folder](/benchmarks/examples). Go to the respective benchmark's folder (e.g., [TSE-2020/mini_httpd](/benchmarks/examples/TSE-2020/mini_httpd)) in the examples folder and run ``make`` to generate the required bitcode file. Generating bitcode files requires `wllvm`.
 
2. Apply -O3 optimzation to the bitcode file e.g., for mini_httpd use
```
opt -O3 mini_httpd.bc -o mini.bc
```

3. Use llc command to generate the object file from the optimized bitcode file.
```
llc -filetype=obj mini.bc -o mini.o
```

4. Use clang++ with -O3 flag to link with dynamic libraries (if needed) and generate the binary file from the object file.
```
clang++ -O3 mini.o -lcrypt -o mini_httpd (where lcrypt is the dynamic library to be linked with)
```

5. Strip the binary file to generate the final binary.
```
strip mini_httpd
```
We used the final binary generated using the strip command as the baseline for all comparisons. Note that, for a fair comparison, it was important to ensure that all optimizations (e.g. -O3) and removal of symbols (e.g. strip) are consistent with what is done in the **Trimmer** pipeline. 
