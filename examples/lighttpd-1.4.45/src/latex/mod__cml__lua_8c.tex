\hypertarget{mod__cml__lua_8c}{\section{mod\-\_\-cml\-\_\-lua.\-c File Reference}
\label{mod__cml__lua_8c}\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}}
}
{\ttfamily \#include \char`\"{}first.\-h\char`\"{}}\\*
{\ttfamily \#include $<$lua.\-h$>$}\\*
{\ttfamily \#include $<$lualib.\-h$>$}\\*
{\ttfamily \#include $<$lauxlib.\-h$>$}\\*
{\ttfamily \#include $<$assert.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include \char`\"{}mod\-\_\-cml\-\_\-funcs.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mod\-\_\-cml.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}log.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stat\-\_\-cache.\-h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mod__cml__lua_8c_a044f8d045fb7bf924ce44c1be20c6746}{H\-A\-S\-H\-L\-E\-N}~16
\item 
\#define \hyperlink{mod__cml__lua_8c_a8a15023e03feb7b6ca9bedd0b8e3a737}{H\-A\-S\-H\-H\-E\-X\-L\-E\-N}~32
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef unsigned char \hyperlink{mod__cml__lua_8c_ac713e55c3ad120c7ae09a0249f1ef9e7}{H\-A\-S\-H} \mbox{[}\hyperlink{mod__secdownload_8c_a044f8d045fb7bf924ce44c1be20c6746}{H\-A\-S\-H\-L\-E\-N}\mbox{]}
\item 
typedef char \hyperlink{mod__cml__lua_8c_ac7f94972a047c62b4661213eb0aec242}{H\-A\-S\-H\-H\-E\-X} \mbox{[}\hyperlink{mod__secdownload_8c_a8a15023e03feb7b6ca9bedd0b8e3a737}{H\-A\-S\-H\-H\-E\-X\-L\-E\-N}+1\mbox{]}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{mod__cml__lua_8c_a88c324c3fdeab45679c9bd7ddf507079}{lua\-\_\-to\-\_\-c\-\_\-get\-\_\-string} (lua\-\_\-\-State $\ast$L, const char $\ast$varname, \hyperlink{structbuffer}{buffer} $\ast$b)
\item 
static int \hyperlink{mod__cml__lua_8c_af6b257d0d848e8282a0ea114900130fe}{lua\-\_\-to\-\_\-c\-\_\-is\-\_\-table} (lua\-\_\-\-State $\ast$L, const char $\ast$varname)
\item 
static int \hyperlink{mod__cml__lua_8c_a319f23084faac031bac50a3bfc341fb4}{c\-\_\-to\-\_\-lua\-\_\-push} (lua\-\_\-\-State $\ast$L, int tbl, const char $\ast$key, size\-\_\-t key\-\_\-len, const char $\ast$val, size\-\_\-t val\-\_\-len)
\item 
static int \hyperlink{mod__cml__lua_8c_a38c4ca52ab2327df0738a2116d25b654}{cache\-\_\-export\-\_\-get\-\_\-params} (lua\-\_\-\-State $\ast$L, int tbl, \hyperlink{structbuffer}{buffer} $\ast$qrystr)
\item 
int \hyperlink{mod__cml__lua_8c_a2b5eb65e5d24d7178c3ae77033011508}{cache\-\_\-parse\-\_\-lua} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structplugin__data}{plugin\-\_\-data} $\ast$p, \hyperlink{structbuffer}{buffer} $\ast$fn)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{mod__cml__lua_8c_a8a15023e03feb7b6ca9bedd0b8e3a737}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!H\-A\-S\-H\-H\-E\-X\-L\-E\-N@{H\-A\-S\-H\-H\-E\-X\-L\-E\-N}}
\index{H\-A\-S\-H\-H\-E\-X\-L\-E\-N@{H\-A\-S\-H\-H\-E\-X\-L\-E\-N}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{H\-A\-S\-H\-H\-E\-X\-L\-E\-N}]{\setlength{\rightskip}{0pt plus 5cm}\#define H\-A\-S\-H\-H\-E\-X\-L\-E\-N~32}}\label{mod__cml__lua_8c_a8a15023e03feb7b6ca9bedd0b8e3a737}
\hypertarget{mod__cml__lua_8c_a044f8d045fb7bf924ce44c1be20c6746}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!H\-A\-S\-H\-L\-E\-N@{H\-A\-S\-H\-L\-E\-N}}
\index{H\-A\-S\-H\-L\-E\-N@{H\-A\-S\-H\-L\-E\-N}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{H\-A\-S\-H\-L\-E\-N}]{\setlength{\rightskip}{0pt plus 5cm}\#define H\-A\-S\-H\-L\-E\-N~16}}\label{mod__cml__lua_8c_a044f8d045fb7bf924ce44c1be20c6746}


\subsection{Typedef Documentation}
\hypertarget{mod__cml__lua_8c_ac713e55c3ad120c7ae09a0249f1ef9e7}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!H\-A\-S\-H@{H\-A\-S\-H}}
\index{H\-A\-S\-H@{H\-A\-S\-H}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{H\-A\-S\-H}]{\setlength{\rightskip}{0pt plus 5cm}typedef unsigned char H\-A\-S\-H\mbox{[}{\bf H\-A\-S\-H\-L\-E\-N}\mbox{]}}}\label{mod__cml__lua_8c_ac713e55c3ad120c7ae09a0249f1ef9e7}
\hypertarget{mod__cml__lua_8c_ac7f94972a047c62b4661213eb0aec242}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!H\-A\-S\-H\-H\-E\-X@{H\-A\-S\-H\-H\-E\-X}}
\index{H\-A\-S\-H\-H\-E\-X@{H\-A\-S\-H\-H\-E\-X}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{H\-A\-S\-H\-H\-E\-X}]{\setlength{\rightskip}{0pt plus 5cm}typedef char H\-A\-S\-H\-H\-E\-X\mbox{[}{\bf H\-A\-S\-H\-H\-E\-X\-L\-E\-N}+1\mbox{]}}}\label{mod__cml__lua_8c_ac7f94972a047c62b4661213eb0aec242}


\subsection{Function Documentation}
\hypertarget{mod__cml__lua_8c_a319f23084faac031bac50a3bfc341fb4}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!c\-\_\-to\-\_\-lua\-\_\-push@{c\-\_\-to\-\_\-lua\-\_\-push}}
\index{c\-\_\-to\-\_\-lua\-\_\-push@{c\-\_\-to\-\_\-lua\-\_\-push}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{c\-\_\-to\-\_\-lua\-\_\-push}]{\setlength{\rightskip}{0pt plus 5cm}static int c\-\_\-to\-\_\-lua\-\_\-push (
\begin{DoxyParamCaption}
\item[{lua\-\_\-\-State $\ast$}]{L, }
\item[{int}]{tbl, }
\item[{const char $\ast$}]{key, }
\item[{size\-\_\-t}]{key\-\_\-len, }
\item[{const char $\ast$}]{val, }
\item[{size\-\_\-t}]{val\-\_\-len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__cml__lua_8c_a319f23084faac031bac50a3bfc341fb4}


Referenced by cache\-\_\-export\-\_\-get\-\_\-params(), and cache\-\_\-parse\-\_\-lua().

\hypertarget{mod__cml__lua_8c_a38c4ca52ab2327df0738a2116d25b654}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!cache\-\_\-export\-\_\-get\-\_\-params@{cache\-\_\-export\-\_\-get\-\_\-params}}
\index{cache\-\_\-export\-\_\-get\-\_\-params@{cache\-\_\-export\-\_\-get\-\_\-params}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{cache\-\_\-export\-\_\-get\-\_\-params}]{\setlength{\rightskip}{0pt plus 5cm}static int cache\-\_\-export\-\_\-get\-\_\-params (
\begin{DoxyParamCaption}
\item[{lua\-\_\-\-State $\ast$}]{L, }
\item[{int}]{tbl, }
\item[{{\bf buffer} $\ast$}]{qrystr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__cml__lua_8c_a38c4ca52ab2327df0738a2116d25b654}


References buffer\-\_\-string\-\_\-length(), c\-\_\-to\-\_\-lua\-\_\-push(), and buffer\-::ptr.



Referenced by cache\-\_\-parse\-\_\-lua().

\hypertarget{mod__cml__lua_8c_a2b5eb65e5d24d7178c3ae77033011508}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!cache\-\_\-parse\-\_\-lua@{cache\-\_\-parse\-\_\-lua}}
\index{cache\-\_\-parse\-\_\-lua@{cache\-\_\-parse\-\_\-lua}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{cache\-\_\-parse\-\_\-lua}]{\setlength{\rightskip}{0pt plus 5cm}int cache\-\_\-parse\-\_\-lua (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf plugin\-\_\-data} $\ast$}]{p, }
\item[{{\bf buffer} $\ast$}]{fn}
\end{DoxyParamCaption}
)}}\label{mod__cml__lua_8c_a2b5eb65e5d24d7178c3ae77033011508}


References array\-\_\-get\-\_\-element(), plugin\-\_\-data\-::basedir, physical\-::basedir, plugin\-\_\-data\-::baseurl, buffer\-\_\-append\-\_\-string(), buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-copy\-\_\-buffer(), buffer\-\_\-copy\-\_\-string(), buffer\-\_\-free(), buffer\-\_\-init(), buffer\-\_\-reset(), buffer\-\_\-string\-\_\-is\-\_\-empty(), c\-\_\-to\-\_\-lua\-\_\-push(), cache\-\_\-export\-\_\-get\-\_\-params(), chunkqueue\-\_\-append\-\_\-file\-\_\-fd(), chunkqueue\-\_\-reset(), plugin\-\_\-data\-::conf, C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, f\-\_\-crypto\-\_\-md5(), f\-\_\-dir\-\_\-files(), f\-\_\-file\-\_\-isreg(), f\-\_\-file\-\_\-mtime(), f\-\_\-memcache\-\_\-exists(), f\-\_\-memcache\-\_\-get\-\_\-long(), f\-\_\-memcache\-\_\-get\-\_\-string(), connection\-::file\-\_\-finished, force\-\_\-assert, H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-I\-N\-I\-S\-H\-E\-D, response\-::headers, http\-\_\-response\-\_\-handle\-\_\-cachable(), log\-\_\-error\-\_\-write(), lua\-\_\-to\-\_\-c\-\_\-get\-\_\-string(), lua\-\_\-to\-\_\-c\-\_\-is\-\_\-table(), request\-::orig\-\_\-uri, request\-\_\-uri\-::path, physical\-::path, request\-::pathinfo, connection\-::physical, buffer\-::ptr, request\-\_\-uri\-::query, connection\-::request, connection\-::response, response\-\_\-header\-\_\-overwrite(), stat\-\_\-cache\-\_\-open\-\_\-rdonly\-\_\-fstat(), plugin\-\_\-data\-::trigger\-\_\-handler, connection\-::uri, data\-\_\-string\-::value, and connection\-::write\-\_\-queue.



Referenced by cache\-\_\-call\-\_\-lua().

\hypertarget{mod__cml__lua_8c_a88c324c3fdeab45679c9bd7ddf507079}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!lua\-\_\-to\-\_\-c\-\_\-get\-\_\-string@{lua\-\_\-to\-\_\-c\-\_\-get\-\_\-string}}
\index{lua\-\_\-to\-\_\-c\-\_\-get\-\_\-string@{lua\-\_\-to\-\_\-c\-\_\-get\-\_\-string}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{lua\-\_\-to\-\_\-c\-\_\-get\-\_\-string}]{\setlength{\rightskip}{0pt plus 5cm}static int lua\-\_\-to\-\_\-c\-\_\-get\-\_\-string (
\begin{DoxyParamCaption}
\item[{lua\-\_\-\-State $\ast$}]{L, }
\item[{const char $\ast$}]{varname, }
\item[{{\bf buffer} $\ast$}]{b}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__cml__lua_8c_a88c324c3fdeab45679c9bd7ddf507079}


References buffer\-\_\-copy\-\_\-string(), and force\-\_\-assert.



Referenced by cache\-\_\-parse\-\_\-lua().

\hypertarget{mod__cml__lua_8c_af6b257d0d848e8282a0ea114900130fe}{\index{mod\-\_\-cml\-\_\-lua.\-c@{mod\-\_\-cml\-\_\-lua.\-c}!lua\-\_\-to\-\_\-c\-\_\-is\-\_\-table@{lua\-\_\-to\-\_\-c\-\_\-is\-\_\-table}}
\index{lua\-\_\-to\-\_\-c\-\_\-is\-\_\-table@{lua\-\_\-to\-\_\-c\-\_\-is\-\_\-table}!mod_cml_lua.c@{mod\-\_\-cml\-\_\-lua.\-c}}
\subsubsection[{lua\-\_\-to\-\_\-c\-\_\-is\-\_\-table}]{\setlength{\rightskip}{0pt plus 5cm}static int lua\-\_\-to\-\_\-c\-\_\-is\-\_\-table (
\begin{DoxyParamCaption}
\item[{lua\-\_\-\-State $\ast$}]{L, }
\item[{const char $\ast$}]{varname}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__cml__lua_8c_af6b257d0d848e8282a0ea114900130fe}


References force\-\_\-assert.



Referenced by cache\-\_\-parse\-\_\-lua().

