\hypertarget{response_8h}{\section{response.\-h File Reference}
\label{response_8h}\index{response.\-h@{response.\-h}}
}
{\ttfamily \#include \char`\"{}first.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}server.\-h\char`\"{}}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structhttp__cgi__opts__t}{http\-\_\-cgi\-\_\-opts\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structhttp__cgi__opts__t}{http\-\_\-cgi\-\_\-opts\-\_\-t} \hyperlink{response_8h_afca5a5c414cac8e582ec2cb69c84dadc}{http\-\_\-cgi\-\_\-opts}
\item 
typedef int($\ast$ \hyperlink{response_8h_afb58d73beec22e6ba855479497039488}{http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb} )(void $\ast$vdata, const char $\ast$k, size\-\_\-t klen, const char $\ast$v, size\-\_\-t vlen)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{response_8h_a0cec9e7921b3c973a7a783c95a9ee7ed}{http\-\_\-response\-\_\-parse} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
int \hyperlink{response_8h_ad53c7010ce671b4065d3cd8cee177498}{http\-\_\-response\-\_\-write\-\_\-header} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
int \hyperlink{response_8h_af843f4449790d30e96e67c7f65cc225e}{response\-\_\-header\-\_\-insert} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, const char $\ast$key, size\-\_\-t keylen, const char $\ast$value, size\-\_\-t vallen)
\item 
int \hyperlink{response_8h_aca062a70078c8b89bb2fc0c09d38a348}{response\-\_\-header\-\_\-overwrite} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, const char $\ast$key, size\-\_\-t keylen, const char $\ast$value, size\-\_\-t vallen)
\item 
int \hyperlink{response_8h_a3ce3b22086acdc60b94f0a4c9ea60e86}{response\-\_\-header\-\_\-append} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, const char $\ast$key, size\-\_\-t keylen, const char $\ast$value, size\-\_\-t vallen)
\item 
int \hyperlink{response_8h_aae6678578ac7631becfa93103cc66645}{http\-\_\-cgi\-\_\-headers} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{response_8h_afca5a5c414cac8e582ec2cb69c84dadc}{http\-\_\-cgi\-\_\-opts} $\ast$opts, \hyperlink{response_8h_afb58d73beec22e6ba855479497039488}{http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb} cb, void $\ast$vdata)
\item 
\hyperlink{settings_8h_a2a8ffc3e29980db202f39ab85ab7e98e}{handler\-\_\-t} \hyperlink{response_8h_af0d193ff05f79b7130f4684a3f205896}{http\-\_\-response\-\_\-prepare} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
int \hyperlink{response_8h_ab5cf9b8d7ff0facd7b5334514de07a15}{http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
int \hyperlink{response_8h_a62af03671bb5ddd52237444182aead90}{http\-\_\-response\-\_\-handle\-\_\-cachable} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$mtime)
\item 
void \hyperlink{response_8h_a4ad4018401db78887e2b6a48b6a9c89b}{http\-\_\-response\-\_\-send\-\_\-file} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$path)
\item 
void \hyperlink{response_8h_afb1ab09bdd47d4a034ca02d5239230c2}{http\-\_\-response\-\_\-xsendfile} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$path, const \hyperlink{structarray}{array} $\ast$xdocroot)
\item 
void \hyperlink{response_8h_af8bb44e05ab2f966671ce0c7b4113111}{http\-\_\-response\-\_\-backend\-\_\-done} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
void \hyperlink{response_8h_af6534bdaeed2f8638cc92a3609227465}{http\-\_\-response\-\_\-backend\-\_\-error} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
\hyperlink{structbuffer}{buffer} $\ast$ \hyperlink{response_8h_ae0692991b1b43d85e062a3eacd5d176c}{strftime\-\_\-cache\-\_\-get} (\hyperlink{structserver}{server} $\ast$srv, time\-\_\-t last\-\_\-mod)
\end{DoxyCompactItemize}


\subsection{Typedef Documentation}
\hypertarget{response_8h_afb58d73beec22e6ba855479497039488}{\index{response.\-h@{response.\-h}!http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb@{http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb}}
\index{http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb@{http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb}]{\setlength{\rightskip}{0pt plus 5cm}typedef int($\ast$ http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb)(void $\ast$vdata, const char $\ast$k, size\-\_\-t klen, const char $\ast$v, size\-\_\-t vlen)}}\label{response_8h_afb58d73beec22e6ba855479497039488}
\hypertarget{response_8h_afca5a5c414cac8e582ec2cb69c84dadc}{\index{response.\-h@{response.\-h}!http\-\_\-cgi\-\_\-opts@{http\-\_\-cgi\-\_\-opts}}
\index{http\-\_\-cgi\-\_\-opts@{http\-\_\-cgi\-\_\-opts}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-cgi\-\_\-opts}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf http\-\_\-cgi\-\_\-opts\-\_\-t}  {\bf http\-\_\-cgi\-\_\-opts}}}\label{response_8h_afca5a5c414cac8e582ec2cb69c84dadc}


\subsection{Function Documentation}
\hypertarget{response_8h_aae6678578ac7631becfa93103cc66645}{\index{response.\-h@{response.\-h}!http\-\_\-cgi\-\_\-headers@{http\-\_\-cgi\-\_\-headers}}
\index{http\-\_\-cgi\-\_\-headers@{http\-\_\-cgi\-\_\-headers}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-cgi\-\_\-headers}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-cgi\-\_\-headers (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf http\-\_\-cgi\-\_\-opts} $\ast$}]{opts, }
\item[{{\bf http\-\_\-cgi\-\_\-header\-\_\-append\-\_\-cb}}]{cb, }
\item[{void $\ast$}]{vdata}
\end{DoxyParamCaption}
)}}\label{response_8h_aae6678578ac7631becfa93103cc66645}
/app1/index/list

stripping /app1 or /app1/ should lead to

/index/list

References server\-\_\-socket\-::addr, http\-\_\-cgi\-\_\-opts\-\_\-t\-::authorizer, physical\-::basedir, http\-\_\-cgi\-\_\-opts\-\_\-t\-::break\-\_\-scriptfilename\-\_\-for\-\_\-php, buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-copy\-\_\-buffer(), buffer\-\_\-copy\-\_\-string\-\_\-encoded\-\_\-cgi\-\_\-varnames(), buffer\-\_\-is\-\_\-empty(), buffer\-\_\-is\-\_\-equal(), buffer\-\_\-is\-\_\-equal\-\_\-caseless\-\_\-string(), buffer\-\_\-string\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-length(), connection\-::conf, C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, request\-::content\-\_\-length, array\-::data, http\-\_\-cgi\-\_\-opts\-\_\-t\-::docroot, connection\-::dst\-\_\-addr, connection\-::dst\-\_\-addr\-\_\-buf, connection\-::environment, connection\-::error\-\_\-handler\-\_\-saved\-\_\-status, connection\-::fd, force\-\_\-assert, get\-\_\-http\-\_\-method\-\_\-name(), get\-\_\-http\-\_\-version\-\_\-name(), request\-::headers, request\-::http\-\_\-method, request\-::http\-\_\-version, sock\-\_\-addr\-::ipv4, L\-I\-\_\-\-I\-T\-O\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H, li\-\_\-itostrn(), li\-\_\-utostrn(), request\-::orig\-\_\-uri, request\-\_\-uri\-::path, physical\-::path, request\-::pathinfo, connection\-::physical, sock\-\_\-addr\-::plain, buffer\-::ptr, request\-\_\-uri\-::query, connection\-::request, request\-\_\-uri\-::scheme, connection\-::server\-\_\-name, specific\-\_\-config\-::server\-\_\-tag, connection\-::srv\-\_\-socket, http\-\_\-cgi\-\_\-opts\-\_\-t\-::strip\-\_\-request\-\_\-uri, server\-::tmp\-\_\-buf, request\-::uri, connection\-::uri, array\-::used, and data\-\_\-string\-::value.



Referenced by build\-\_\-ssi\-\_\-cgi\-\_\-vars(), cgi\-\_\-create\-\_\-env(), fcgi\-\_\-create\-\_\-env(), and scgi\-\_\-create\-\_\-env().

\hypertarget{response_8h_af8bb44e05ab2f966671ce0c7b4113111}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-backend\-\_\-done@{http\-\_\-response\-\_\-backend\-\_\-done}}
\index{http\-\_\-response\-\_\-backend\-\_\-done@{http\-\_\-response\-\_\-backend\-\_\-done}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-backend\-\_\-done}]{\setlength{\rightskip}{0pt plus 5cm}void http\-\_\-response\-\_\-backend\-\_\-done (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{response_8h_af8bb44e05ab2f966671ce0c7b4113111}


References C\-O\-N\-\_\-\-S\-T\-A\-T\-E\-\_\-\-H\-A\-N\-D\-L\-E\-\_\-\-R\-E\-Q\-U\-E\-S\-T, C\-O\-N\-\_\-\-S\-T\-A\-T\-E\-\_\-\-R\-E\-A\-D\-\_\-\-P\-O\-S\-T, C\-O\-N\-\_\-\-S\-T\-A\-T\-E\-\_\-\-W\-R\-I\-T\-E, D\-I\-R\-E\-C\-T, connection\-::file\-\_\-finished, connection\-::file\-\_\-started, http\-\_\-chunk\-\_\-close(), connection\-::http\-\_\-status, connection\-::mode, and connection\-::state.



Referenced by cgi\-\_\-connection\-\_\-close(), fcgi\-\_\-connection\-\_\-close(), proxy\-\_\-connection\-\_\-close(), and scgi\-\_\-connection\-\_\-close().

\hypertarget{response_8h_af6534bdaeed2f8638cc92a3609227465}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-backend\-\_\-error@{http\-\_\-response\-\_\-backend\-\_\-error}}
\index{http\-\_\-response\-\_\-backend\-\_\-error@{http\-\_\-response\-\_\-backend\-\_\-error}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-backend\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}void http\-\_\-response\-\_\-backend\-\_\-error (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{response_8h_af6534bdaeed2f8638cc92a3609227465}


References D\-I\-R\-E\-C\-T, connection\-::file\-\_\-finished, connection\-::file\-\_\-started, connection\-::keep\-\_\-alive, connection\-::mode, and U\-N\-U\-S\-E\-D.



Referenced by fcgi\-\_\-handle\-\_\-fdevent(), fcgi\-\_\-recv\-\_\-response(), proxy\-\_\-handle\-\_\-fdevent(), proxy\-\_\-recv\-\_\-response(), scgi\-\_\-handle\-\_\-fdevent(), and scgi\-\_\-recv\-\_\-response().

\hypertarget{response_8h_a62af03671bb5ddd52237444182aead90}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-handle\-\_\-cachable@{http\-\_\-response\-\_\-handle\-\_\-cachable}}
\index{http\-\_\-response\-\_\-handle\-\_\-cachable@{http\-\_\-response\-\_\-handle\-\_\-cachable}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-handle\-\_\-cachable}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-response\-\_\-handle\-\_\-cachable (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{mtime}
\end{DoxyParamCaption}
)}}\label{response_8h_a62af03671bb5ddd52237444182aead90}
parsing failed, let's get out of here

References D\-I\-R\-E\-C\-T, physical\-::etag, etag\-\_\-is\-\_\-equal(), H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-I\-N\-I\-S\-H\-E\-D, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, request\-::http\-\_\-if\-\_\-modified\-\_\-since, request\-::http\-\_\-if\-\_\-none\-\_\-match, request\-::http\-\_\-method, H\-T\-T\-P\-\_\-\-M\-E\-T\-H\-O\-D\-\_\-\-G\-E\-T, H\-T\-T\-P\-\_\-\-M\-E\-T\-H\-O\-D\-\_\-\-H\-E\-A\-D, connection\-::http\-\_\-status, connection\-::mode, connection\-::physical, buffer\-::ptr, connection\-::request, and U\-N\-U\-S\-E\-D.



Referenced by cache\-\_\-parse\-\_\-lua(), http\-\_\-response\-\_\-send\-\_\-file(), mod\-\_\-ssi\-\_\-handle\-\_\-request(), and P\-H\-Y\-S\-I\-C\-A\-L\-P\-A\-T\-H\-\_\-\-F\-U\-N\-C().

\hypertarget{response_8h_a0cec9e7921b3c973a7a783c95a9ee7ed}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-parse@{http\-\_\-response\-\_\-parse}}
\index{http\-\_\-response\-\_\-parse@{http\-\_\-response\-\_\-parse}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-parse}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-response\-\_\-parse (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{response_8h_a0cec9e7921b3c973a7a783c95a9ee7ed}
\hypertarget{response_8h_af0d193ff05f79b7130f4684a3f205896}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-prepare@{http\-\_\-response\-\_\-prepare}}
\index{http\-\_\-response\-\_\-prepare@{http\-\_\-response\-\_\-prepare}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-prepare}]{\setlength{\rightskip}{0pt plus 5cm}{\bf handler\-\_\-t} http\-\_\-response\-\_\-prepare (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{response_8h_af0d193ff05f79b7130f4684a3f205896}
prepare strings


\begin{DoxyItemize}
\item uri.\-path\-\_\-raw
\item uri.\-path (secure)
\item uri.\-query
\end{DoxyItemize}

Name according to R\-F\-C 2396


\begin{DoxyItemize}
\item scheme
\item authority
\item path
\item query
\end{DoxyItemize}

(scheme)\-://(authority)(path)?(query)\#fragment

their might be a fragment which has to be cut away

extract query string from \hyperlink{structrequest_aef1dc716db5d4c8e7a6f9bbe97951ed9}{request.\-uri}

call plugins


\begin{DoxyItemize}
\item based on the raw U\-R\-L
\end{DoxyItemize}

call plugins


\begin{DoxyItemize}
\item based on the clean U\-R\-L
\end{DoxyItemize}

create physical filename -\/$>$ \hyperlink{structphysical_ab8904c540bcd84c8a18ec85ab198910d}{physical.\-path} = docroot + rel\-\_\-path

References specific\-\_\-config\-::allow\-\_\-http11, request\-\_\-uri\-::authority, physical\-::basedir, buffer\-\_\-append\-\_\-slash(), buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-copy\-\_\-buffer(), buffer\-\_\-copy\-\_\-string(), buffer\-\_\-copy\-\_\-string\-\_\-len(), buffer\-\_\-is\-\_\-empty(), buffer\-\_\-path\-\_\-simplify(), buffer\-\_\-reset(), buffer\-\_\-string\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-length(), buffer\-\_\-string\-\_\-set\-\_\-length(), buffer\-\_\-to\-\_\-lower(), buffer\-\_\-urldecode\-\_\-path(), chunkqueue\-\_\-reset(), C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-C\-O\-O\-K\-I\-E, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-H\-O\-S\-T, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-L\-A\-N\-G\-U\-A\-G\-E, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-R\-E\-F\-E\-R\-E\-R, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-R\-E\-M\-O\-T\-E\-\_\-\-I\-P, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-R\-E\-Q\-U\-E\-S\-T\-\_\-\-M\-E\-T\-H\-O\-D, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-S\-C\-H\-E\-M\-E, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-U\-R\-L, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-U\-S\-E\-R\-\_\-\-A\-G\-E\-N\-T, C\-O\-M\-P\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-S\-O\-C\-K\-E\-T, connection\-::conditional\-\_\-is\-\_\-valid, connection\-::conf, config\-\_\-cond\-\_\-cache\-\_\-reset(), config\-\_\-patch\-\_\-connection(), config\-\_\-setup\-\_\-connection(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, request\-::content\-\_\-length, D\-I\-R\-E\-C\-T, physical\-::doc\-\_\-root, specific\-\_\-config\-::document\-\_\-root, connection\-::file\-\_\-finished, specific\-\_\-config\-::follow\-\_\-symlink, specific\-\_\-config\-::force\-\_\-lowercase\-\_\-filenames, H\-A\-N\-D\-L\-E\-R\-\_\-\-C\-O\-M\-E\-B\-A\-C\-K, H\-A\-N\-D\-L\-E\-R\-\_\-\-E\-R\-R\-O\-R, H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-I\-N\-I\-S\-H\-E\-D, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, H\-A\-N\-D\-L\-E\-R\-\_\-\-W\-A\-I\-T\-\_\-\-F\-O\-R\-\_\-\-E\-V\-E\-N\-T, request\-::http\-\_\-host, request\-::http\-\_\-method, H\-T\-T\-P\-\_\-\-M\-E\-T\-H\-O\-D\-\_\-\-O\-P\-T\-I\-O\-N\-S, http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory(), connection\-::http\-\_\-status, request\-::http\-\_\-version, H\-T\-T\-P\-\_\-\-V\-E\-R\-S\-I\-O\-N\-\_\-1\-\_\-0, server\-\_\-socket\-::is\-\_\-ssl, connection\-::keep\-\_\-alive, specific\-\_\-config\-::log\-\_\-condition\-\_\-handling, log\-\_\-error\-\_\-write(), specific\-\_\-config\-::log\-\_\-file\-\_\-not\-\_\-found, specific\-\_\-config\-::log\-\_\-request\-\_\-handling, specific\-\_\-config\-::max\-\_\-request\-\_\-size, connection\-::mode, request\-\_\-uri\-::path, physical\-::path, request\-\_\-uri\-::path\-\_\-raw, request\-::pathinfo, connection\-::physical, plugins\-\_\-call\-\_\-handle\-\_\-docroot(), plugins\-\_\-call\-\_\-handle\-\_\-physical(), plugins\-\_\-call\-\_\-handle\-\_\-subrequest(), plugins\-\_\-call\-\_\-handle\-\_\-subrequest\-\_\-start(), plugins\-\_\-call\-\_\-handle\-\_\-uri\-\_\-clean(), plugins\-\_\-call\-\_\-handle\-\_\-uri\-\_\-raw(), buffer\-::ptr, request\-\_\-uri\-::query, physical\-::rel\-\_\-path, connection\-::request, response\-\_\-header\-\_\-insert(), request\-\_\-uri\-::scheme, connection\-::server\-\_\-name, connection\-::srv\-\_\-socket, specific\-\_\-config\-::ssl\-\_\-verifyclient, stat\-\_\-cache\-\_\-entry\-::st, stat\-\_\-cache\-\_\-get\-\_\-entry(), server\-::tmp\-\_\-buf, request\-::uri, connection\-::uri, buffer\-::used, and connection\-::write\-\_\-queue.



Referenced by connection\-\_\-state\-\_\-machine().

\hypertarget{response_8h_ab5cf9b8d7ff0facd7b5334514de07a15}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory@{http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory}}
\index{http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory@{http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{response_8h_ab5cf9b8d7ff0facd7b5334514de07a15}


References request\-\_\-uri\-::authority, buffer\-\_\-append\-\_\-int(), buffer\-\_\-append\-\_\-string(), buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-append\-\_\-string\-\_\-encoded(), buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-copy\-\_\-buffer(), buffer\-\_\-free(), buffer\-\_\-init(), buffer\-\_\-is\-\_\-empty(), buffer\-\_\-is\-\_\-equal\-\_\-caseless\-\_\-string(), buffer\-\_\-string\-\_\-is\-\_\-empty(), C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, E\-N\-C\-O\-D\-I\-N\-G\-\_\-\-R\-E\-L\-\_\-\-U\-R\-I, connection\-::fd, connection\-::file\-\_\-finished, connection\-::http\-\_\-status, sock\-\_\-addr\-::ipv4, log\-\_\-error\-\_\-write(), request\-\_\-uri\-::path, sock\-\_\-addr\-::plain, server\-\_\-config\-::port, request\-\_\-uri\-::query, response\-\_\-header\-\_\-insert(), request\-\_\-uri\-::scheme, server\-::srvconf, and connection\-::uri.



Referenced by http\-\_\-response\-\_\-prepare(), S\-U\-B\-R\-E\-Q\-U\-E\-S\-T\-\_\-\-F\-U\-N\-C(), and U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C().

\hypertarget{response_8h_a4ad4018401db78887e2b6a48b6a9c89b}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-send\-\_\-file@{http\-\_\-response\-\_\-send\-\_\-file}}
\index{http\-\_\-response\-\_\-send\-\_\-file@{http\-\_\-response\-\_\-send\-\_\-file}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-send\-\_\-file}]{\setlength{\rightskip}{0pt plus 5cm}void http\-\_\-response\-\_\-send\-\_\-file (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{path}
\end{DoxyParamCaption}
)}}\label{response_8h_a4ad4018401db78887e2b6a48b6a9c89b}
client wants a E\-Tag

we don't have a Last-\/\-Modified and can match the If-\/\-Range\-:

sending all

References array\-\_\-get\-\_\-element(), buffer\-\_\-is\-\_\-equal(), buffer\-\_\-string\-\_\-is\-\_\-empty(), connection\-::conf, C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, stat\-\_\-cache\-\_\-entry\-::content\-\_\-type, physical\-::etag, stat\-\_\-cache\-\_\-entry\-::etag, connection\-::etag\-\_\-flags, etag\-\_\-mutate(), connection\-::file\-\_\-finished, specific\-\_\-config\-::follow\-\_\-symlink, H\-A\-N\-D\-L\-E\-R\-\_\-\-E\-R\-R\-O\-R, H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-I\-N\-I\-S\-H\-E\-D, request\-::headers, response\-::headers, http\-\_\-chunk\-\_\-append\-\_\-file(), request\-::http\-\_\-range, http\-\_\-response\-\_\-handle\-\_\-cachable(), http\-\_\-response\-\_\-parse\-\_\-range(), connection\-::http\-\_\-status, log\-\_\-error\-\_\-write(), specific\-\_\-config\-::log\-\_\-file\-\_\-not\-\_\-found, specific\-\_\-config\-::log\-\_\-request\-\_\-handling, stat\-\_\-cache\-\_\-entry\-::name, request\-\_\-uri\-::path, connection\-::physical, buffer\-::ptr, specific\-\_\-config\-::range\-\_\-requests, connection\-::request, connection\-::response, response\-\_\-header\-\_\-overwrite(), stat\-\_\-cache\-\_\-entry\-::st, stat\-\_\-cache\-\_\-get\-\_\-entry(), strftime\-\_\-cache\-\_\-get(), connection\-::uri, and data\-\_\-string\-::value.



Referenced by http\-\_\-response\-\_\-xsendfile(), and U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C().

\hypertarget{response_8h_ad53c7010ce671b4065d3cd8cee177498}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-write\-\_\-header@{http\-\_\-response\-\_\-write\-\_\-header}}
\index{http\-\_\-response\-\_\-write\-\_\-header@{http\-\_\-response\-\_\-write\-\_\-header}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-write\-\_\-header}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-response\-\_\-write\-\_\-header (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{response_8h_ad53c7010ce671b4065d3cd8cee177498}


References buffer\-\_\-append\-\_\-int(), buffer\-\_\-append\-\_\-strftime(), buffer\-\_\-append\-\_\-string(), buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-append\-\_\-string\-\_\-encoded(), buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-copy\-\_\-string\-\_\-len(), buffer\-\_\-free(), buffer\-\_\-init(), buffer\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-length(), buffer\-\_\-string\-\_\-prepare\-\_\-copy(), connection\-::bytes\-\_\-header, chunkqueue\-\_\-prepend\-\_\-buffer(), connection\-::conf, C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, server\-::cur\-\_\-ts, array\-::data, E\-N\-C\-O\-D\-I\-N\-G\-\_\-\-H\-T\-T\-P\-\_\-\-H\-E\-A\-D\-E\-R, get\-\_\-http\-\_\-status\-\_\-name(), response\-::headers, connection\-::http\-\_\-status, request\-::http\-\_\-version, H\-T\-T\-P\-\_\-\-V\-E\-R\-S\-I\-O\-N\-\_\-1\-\_\-1, connection\-::keep\-\_\-alive, connection\-::keep\-\_\-alive\-\_\-idle, server\-::last\-\_\-generated\-\_\-date\-\_\-ts, log\-\_\-error\-\_\-write(), specific\-\_\-config\-::log\-\_\-response\-\_\-header, specific\-\_\-config\-::max\-\_\-keep\-\_\-alive\-\_\-idle, specific\-\_\-config\-::max\-\_\-keep\-\_\-alive\-\_\-requests, connection\-::request, connection\-::request\-\_\-count, connection\-::response, response\-\_\-header\-\_\-overwrite(), specific\-\_\-config\-::server\-\_\-tag, response\-::transfer\-\_\-encoding, server\-::ts\-\_\-date\-\_\-str, array\-::used, data\-\_\-string\-::value, and connection\-::write\-\_\-queue.



Referenced by connection\-\_\-handle\-\_\-write\-\_\-prepare().

\hypertarget{response_8h_afb1ab09bdd47d4a034ca02d5239230c2}{\index{response.\-h@{response.\-h}!http\-\_\-response\-\_\-xsendfile@{http\-\_\-response\-\_\-xsendfile}}
\index{http\-\_\-response\-\_\-xsendfile@{http\-\_\-response\-\_\-xsendfile}!response.h@{response.\-h}}
\subsubsection[{http\-\_\-response\-\_\-xsendfile}]{\setlength{\rightskip}{0pt plus 5cm}void http\-\_\-response\-\_\-xsendfile (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{path, }
\item[{const {\bf array} $\ast$}]{xdocroot}
\end{DoxyParamCaption}
)}}\label{response_8h_afb1ab09bdd47d4a034ca02d5239230c2}


References array\-\_\-get\-\_\-element(), buffer\-\_\-path\-\_\-simplify(), buffer\-\_\-reset(), buffer\-\_\-string\-\_\-length(), buffer\-\_\-to\-\_\-lower(), buffer\-\_\-urldecode\-\_\-path(), connection\-::conf, response\-::content\-\_\-length, array\-::data, D\-I\-R\-E\-C\-T, connection\-::file\-\_\-started, specific\-\_\-config\-::force\-\_\-lowercase\-\_\-filenames, response\-::headers, H\-T\-T\-P\-\_\-\-C\-O\-N\-T\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H, http\-\_\-response\-\_\-send\-\_\-file(), connection\-::http\-\_\-status, log\-\_\-error\-\_\-write(), connection\-::mode, connection\-::parsed\-\_\-response, buffer\-::ptr, connection\-::response, array\-::used, and data\-\_\-string\-::value.



Referenced by cgi\-\_\-demux\-\_\-response(), fcgi\-\_\-demux\-\_\-response(), and scgi\-\_\-demux\-\_\-response().

\hypertarget{response_8h_a3ce3b22086acdc60b94f0a4c9ea60e86}{\index{response.\-h@{response.\-h}!response\-\_\-header\-\_\-append@{response\-\_\-header\-\_\-append}}
\index{response\-\_\-header\-\_\-append@{response\-\_\-header\-\_\-append}!response.h@{response.\-h}}
\subsubsection[{response\-\_\-header\-\_\-append}]{\setlength{\rightskip}{0pt plus 5cm}int response\-\_\-header\-\_\-append (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{const char $\ast$}]{key, }
\item[{size\-\_\-t}]{keylen, }
\item[{const char $\ast$}]{value, }
\item[{size\-\_\-t}]{vallen}
\end{DoxyParamCaption}
)}}\label{response_8h_a3ce3b22086acdc60b94f0a4c9ea60e86}


References array\-\_\-get\-\_\-element(), buffer\-\_\-append\-\_\-string\-\_\-len(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, response\-::headers, connection\-::response, response\-\_\-header\-\_\-insert(), U\-N\-U\-S\-E\-D, and data\-\_\-string\-::value.



Referenced by C\-O\-N\-N\-E\-C\-T\-I\-O\-N\-\_\-\-F\-U\-N\-C().

\hypertarget{response_8h_af843f4449790d30e96e67c7f65cc225e}{\index{response.\-h@{response.\-h}!response\-\_\-header\-\_\-insert@{response\-\_\-header\-\_\-insert}}
\index{response\-\_\-header\-\_\-insert@{response\-\_\-header\-\_\-insert}!response.h@{response.\-h}}
\subsubsection[{response\-\_\-header\-\_\-insert}]{\setlength{\rightskip}{0pt plus 5cm}int response\-\_\-header\-\_\-insert (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{const char $\ast$}]{key, }
\item[{size\-\_\-t}]{keylen, }
\item[{const char $\ast$}]{value, }
\item[{size\-\_\-t}]{vallen}
\end{DoxyParamCaption}
)}}\label{response_8h_af843f4449790d30e96e67c7f65cc225e}


References array\-\_\-get\-\_\-unused\-\_\-element(), array\-\_\-insert\-\_\-unique(), buffer\-\_\-copy\-\_\-string\-\_\-len(), data\-\_\-response\-\_\-init(), response\-::headers, connection\-::response, T\-Y\-P\-E\-\_\-\-S\-T\-R\-I\-N\-G, U\-N\-U\-S\-E\-D, and data\-\_\-string\-::value.



Referenced by C\-O\-N\-N\-E\-C\-T\-I\-O\-N\-\_\-\-F\-U\-N\-C(), connection\-\_\-handle\-\_\-errdoc\-\_\-init(), connection\-\_\-handle\-\_\-write\-\_\-prepare(), http\-\_\-response\-\_\-parse\-\_\-range(), http\-\_\-response\-\_\-prepare(), http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory(), mod\-\_\-auth\-\_\-send\-\_\-401\-\_\-unauthorized\-\_\-basic(), mod\-\_\-auth\-\_\-send\-\_\-401\-\_\-unauthorized\-\_\-digest(), mod\-\_\-authn\-\_\-gssapi\-\_\-send\-\_\-401\-\_\-unauthorized\-\_\-basic(), mod\-\_\-authn\-\_\-gssapi\-\_\-send\-\_\-401\-\_\-unauthorized\-\_\-negotiate(), mod\-\_\-redirect\-\_\-uri\-\_\-handler(), P\-H\-Y\-S\-I\-C\-A\-L\-P\-A\-T\-H\-\_\-\-F\-U\-N\-C(), response\-\_\-header\-\_\-append(), response\-\_\-header\-\_\-overwrite(), and U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C().

\hypertarget{response_8h_aca062a70078c8b89bb2fc0c09d38a348}{\index{response.\-h@{response.\-h}!response\-\_\-header\-\_\-overwrite@{response\-\_\-header\-\_\-overwrite}}
\index{response\-\_\-header\-\_\-overwrite@{response\-\_\-header\-\_\-overwrite}!response.h@{response.\-h}}
\subsubsection[{response\-\_\-header\-\_\-overwrite}]{\setlength{\rightskip}{0pt plus 5cm}int response\-\_\-header\-\_\-overwrite (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{const char $\ast$}]{key, }
\item[{size\-\_\-t}]{keylen, }
\item[{const char $\ast$}]{value, }
\item[{size\-\_\-t}]{vallen}
\end{DoxyParamCaption}
)}}\label{response_8h_aca062a70078c8b89bb2fc0c09d38a348}


References array\-\_\-get\-\_\-element(), buffer\-\_\-copy\-\_\-string(), response\-::headers, connection\-::response, response\-\_\-header\-\_\-insert(), U\-N\-U\-S\-E\-D, and data\-\_\-string\-::value.



Referenced by cache\-\_\-parse\-\_\-lua(), C\-O\-N\-N\-E\-C\-T\-I\-O\-N\-\_\-\-F\-U\-N\-C(), connection\-\_\-handle\-\_\-write\-\_\-prepare(), http\-\_\-list\-\_\-directory(), http\-\_\-response\-\_\-parse\-\_\-range(), http\-\_\-response\-\_\-send\-\_\-file(), http\-\_\-response\-\_\-write\-\_\-header(), magnet\-\_\-copy\-\_\-response\-\_\-header(), mod\-\_\-ssi\-\_\-handle\-\_\-request(), mod\-\_\-status\-\_\-handle\-\_\-server\-\_\-config(), mod\-\_\-status\-\_\-handle\-\_\-server\-\_\-statistics(), mod\-\_\-status\-\_\-handle\-\_\-server\-\_\-status\-\_\-html(), mod\-\_\-status\-\_\-handle\-\_\-server\-\_\-status\-\_\-json(), mod\-\_\-status\-\_\-handle\-\_\-server\-\_\-status\-\_\-text(), P\-H\-Y\-S\-I\-C\-A\-L\-P\-A\-T\-H\-\_\-\-F\-U\-N\-C(), S\-U\-B\-R\-E\-Q\-U\-E\-S\-T\-\_\-\-F\-U\-N\-C(), and U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C().

\hypertarget{response_8h_ae0692991b1b43d85e062a3eacd5d176c}{\index{response.\-h@{response.\-h}!strftime\-\_\-cache\-\_\-get@{strftime\-\_\-cache\-\_\-get}}
\index{strftime\-\_\-cache\-\_\-get@{strftime\-\_\-cache\-\_\-get}!response.h@{response.\-h}}
\subsubsection[{strftime\-\_\-cache\-\_\-get}]{\setlength{\rightskip}{0pt plus 5cm}{\bf buffer}$\ast$ strftime\-\_\-cache\-\_\-get (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{time\-\_\-t}]{last\-\_\-mod}
\end{DoxyParamCaption}
)}}\label{response_8h_ae0692991b1b43d85e062a3eacd5d176c}


References buffer\-\_\-append\-\_\-strftime(), buffer\-\_\-string\-\_\-prepare\-\_\-copy(), F\-I\-L\-E\-\_\-\-C\-A\-C\-H\-E\-\_\-\-M\-A\-X, mtime\-\_\-cache\-\_\-type\-::mtime, server\-::mtime\-\_\-cache, and mtime\-\_\-cache\-\_\-type\-::str.



Referenced by http\-\_\-response\-\_\-send\-\_\-file(), mod\-\_\-ssi\-\_\-handle\-\_\-request(), and P\-H\-Y\-S\-I\-C\-A\-L\-P\-A\-T\-H\-\_\-\-F\-U\-N\-C().

