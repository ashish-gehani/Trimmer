\hypertarget{request_8h}{\section{request.\-h File Reference}
\label{request_8h}\index{request.\-h@{request.\-h}}
}
{\ttfamily \#include \char`\"{}first.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}server.\-h\char`\"{}}\\*
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8}{http\-\_\-parseopts\-\_\-e} \{ \hyperlink{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8a8fd88f04ca4068b8e5fcbf5fa32c2bc4}{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-E\-A\-D\-E\-R\-\_\-\-S\-T\-R\-I\-C\-T} = 1, 
\hyperlink{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8adbe49e79de15b606ddd6d0fae8d6eb9c}{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-S\-T\-R\-I\-C\-T} = 2, 
\hyperlink{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8ab9b2f6dc62f8210a3fa1b20bbb20141b}{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-N\-O\-R\-M\-A\-L\-I\-Z\-E} = 4
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{request_8h_a820dceb933d8308d36e31d458f25e364}{http\-\_\-request\-\_\-parse} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
int \hyperlink{request_8h_a9133b7764d3adedef5d89a8d1f151b39}{http\-\_\-request\-\_\-header\-\_\-finished} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
int \hyperlink{request_8h_acdde7c16cc6d7a7034f6a4c1749737a8}{http\-\_\-request\-\_\-host\-\_\-normalize} (\hyperlink{structbuffer}{buffer} $\ast$b)
\end{DoxyCompactItemize}


\subsection{Enumeration Type Documentation}
\hypertarget{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8}{\index{request.\-h@{request.\-h}!http\-\_\-parseopts\-\_\-e@{http\-\_\-parseopts\-\_\-e}}
\index{http\-\_\-parseopts\-\_\-e@{http\-\_\-parseopts\-\_\-e}!request.h@{request.\-h}}
\subsubsection[{http\-\_\-parseopts\-\_\-e}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf http\-\_\-parseopts\-\_\-e}}}\label{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-E\-A\-D\-E\-R\-\_\-\-S\-T\-R\-I\-C\-T@{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-E\-A\-D\-E\-R\-\_\-\-S\-T\-R\-I\-C\-T}!request.\-h@{request.\-h}}\index{request.\-h@{request.\-h}!H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-E\-A\-D\-E\-R\-\_\-\-S\-T\-R\-I\-C\-T@{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-E\-A\-D\-E\-R\-\_\-\-S\-T\-R\-I\-C\-T}}\item[{\em 
\hypertarget{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8a8fd88f04ca4068b8e5fcbf5fa32c2bc4}{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-E\-A\-D\-E\-R\-\_\-\-S\-T\-R\-I\-C\-T}\label{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8a8fd88f04ca4068b8e5fcbf5fa32c2bc4}
}]\index{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-S\-T\-R\-I\-C\-T@{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-S\-T\-R\-I\-C\-T}!request.\-h@{request.\-h}}\index{request.\-h@{request.\-h}!H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-S\-T\-R\-I\-C\-T@{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-S\-T\-R\-I\-C\-T}}\item[{\em 
\hypertarget{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8adbe49e79de15b606ddd6d0fae8d6eb9c}{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-S\-T\-R\-I\-C\-T}\label{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8adbe49e79de15b606ddd6d0fae8d6eb9c}
}]\index{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-N\-O\-R\-M\-A\-L\-I\-Z\-E@{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-N\-O\-R\-M\-A\-L\-I\-Z\-E}!request.\-h@{request.\-h}}\index{request.\-h@{request.\-h}!H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-N\-O\-R\-M\-A\-L\-I\-Z\-E@{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-N\-O\-R\-M\-A\-L\-I\-Z\-E}}\item[{\em 
\hypertarget{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8ab9b2f6dc62f8210a3fa1b20bbb20141b}{H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-N\-O\-R\-M\-A\-L\-I\-Z\-E}\label{request_8h_af39ffa5d9f128bed10ebf2a3f4db5ed8ab9b2f6dc62f8210a3fa1b20bbb20141b}
}]\end{description}
\end{Desc}


\subsection{Function Documentation}
\hypertarget{request_8h_a9133b7764d3adedef5d89a8d1f151b39}{\index{request.\-h@{request.\-h}!http\-\_\-request\-\_\-header\-\_\-finished@{http\-\_\-request\-\_\-header\-\_\-finished}}
\index{http\-\_\-request\-\_\-header\-\_\-finished@{http\-\_\-request\-\_\-header\-\_\-finished}!request.h@{request.\-h}}
\subsubsection[{http\-\_\-request\-\_\-header\-\_\-finished}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-request\-\_\-header\-\_\-finished (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{request_8h_a9133b7764d3adedef5d89a8d1f151b39}


References buffer\-\_\-string\-\_\-length(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, buffer\-::ptr, request\-::request, connection\-::request, and U\-N\-U\-S\-E\-D.

\hypertarget{request_8h_acdde7c16cc6d7a7034f6a4c1749737a8}{\index{request.\-h@{request.\-h}!http\-\_\-request\-\_\-host\-\_\-normalize@{http\-\_\-request\-\_\-host\-\_\-normalize}}
\index{http\-\_\-request\-\_\-host\-\_\-normalize@{http\-\_\-request\-\_\-host\-\_\-normalize}!request.h@{request.\-h}}
\subsubsection[{http\-\_\-request\-\_\-host\-\_\-normalize}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-request\-\_\-host\-\_\-normalize (
\begin{DoxyParamCaption}
\item[{{\bf buffer} $\ast$}]{b}
\end{DoxyParamCaption}
)}}\label{request_8h_acdde7c16cc6d7a7034f6a4c1749737a8}


References buffer\-\_\-append\-\_\-int(), buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-copy\-\_\-string(), buffer\-\_\-string\-\_\-length(), buffer\-\_\-string\-\_\-set\-\_\-length(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, light\-\_\-isdigit(), and buffer\-::ptr.



Referenced by configparser\-\_\-remoteip\-\_\-normalize\-\_\-compat(), http\-\_\-request\-\_\-parse(), and yy\-\_\-reduce().

\hypertarget{request_8h_a820dceb933d8308d36e31d458f25e364}{\index{request.\-h@{request.\-h}!http\-\_\-request\-\_\-parse@{http\-\_\-request\-\_\-parse}}
\index{http\-\_\-request\-\_\-parse@{http\-\_\-request\-\_\-parse}!request.h@{request.\-h}}
\subsubsection[{http\-\_\-request\-\_\-parse}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-request\-\_\-parse (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{request_8h_a820dceb933d8308d36e31d458f25e364}
1$\ast$$<$any char=\char`\"{}\char`\"{} except=\char`\"{}\char`\"{} ctls=\char`\"{}\char`\"{} or=\char`\"{}\char`\"{} separators$>$=\char`\"{}\char`\"{}$>$ C\-T\-Ls == 0-\/31 + 127, C\-H\-A\-R = 7-\/bit ascii (0..127)

we use a evil hack to handle the line-\/folding

As \hyperlink{array_8c_a785bb3fb3022ccb15596be169a6e522a}{array\-\_\-insert\-\_\-unique()} deletes 'ds' in the case of a duplicate ds points somewhere and we get a evil crash. As a solution we keep the old \char`\"{}key\char`\"{} and get the current value from the hash and append us

References specific\-\_\-config\-::allow\-\_\-http11, array\-\_\-get\-\_\-element(), array\-\_\-get\-\_\-unused\-\_\-element(), array\-\_\-insert\-\_\-unique(), array\-\_\-reset(), buffer\-\_\-append\-\_\-string(), buffer\-\_\-caseless\-\_\-compare(), buffer\-\_\-copy\-\_\-buffer(), buffer\-\_\-copy\-\_\-string\-\_\-len(), buffer\-\_\-free(), buffer\-\_\-init(), buffer\-\_\-is\-\_\-empty(), buffer\-\_\-reset(), buffer\-\_\-string\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-length(), connection\-::conf, C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, request\-::content\-\_\-length, array\-::data, data\-\_\-string\-\_\-init(), connection\-::fd, get\-\_\-http\-\_\-method\-\_\-key(), connection\-::header\-\_\-len, request\-::headers, request\-::http\-\_\-content\-\_\-type, request\-::http\-\_\-host, request\-::http\-\_\-if\-\_\-modified\-\_\-since, request\-::http\-\_\-if\-\_\-none\-\_\-match, request\-::http\-\_\-method, H\-T\-T\-P\-\_\-\-M\-E\-T\-H\-O\-D\-\_\-\-G\-E\-T, H\-T\-T\-P\-\_\-\-M\-E\-T\-H\-O\-D\-\_\-\-H\-E\-A\-D, H\-T\-T\-P\-\_\-\-M\-E\-T\-H\-O\-D\-\_\-\-P\-O\-S\-T, H\-T\-T\-P\-\_\-\-M\-E\-T\-H\-O\-D\-\_\-\-U\-N\-S\-E\-T, H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-E\-A\-D\-E\-R\-\_\-\-S\-T\-R\-I\-C\-T, H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-N\-O\-R\-M\-A\-L\-I\-Z\-E, H\-T\-T\-P\-\_\-\-P\-A\-R\-S\-E\-O\-P\-T\-\_\-\-H\-O\-S\-T\-\_\-\-S\-T\-R\-I\-C\-T, specific\-\_\-config\-::http\-\_\-parseopts, request\-::http\-\_\-range, http\-\_\-request\-\_\-host\-\_\-normalize(), http\-\_\-request\-\_\-split\-\_\-value(), connection\-::http\-\_\-status, request\-::http\-\_\-version, H\-T\-T\-P\-\_\-\-V\-E\-R\-S\-I\-O\-N\-\_\-1\-\_\-0, H\-T\-T\-P\-\_\-\-V\-E\-R\-S\-I\-O\-N\-\_\-1\-\_\-1, response\-::keep\-\_\-alive, connection\-::keep\-\_\-alive, log\-\_\-error\-\_\-write(), specific\-\_\-config\-::log\-\_\-request\-\_\-header, server\-\_\-config\-::log\-\_\-request\-\_\-header\-\_\-on\-\_\-error, request\-::orig\-\_\-uri, connection\-::parse\-\_\-request, buffer\-::ptr, server\-\_\-config\-::reject\-\_\-expect\-\_\-100\-\_\-with\-\_\-417, request\-::request, connection\-::request, request\-\_\-check\-\_\-hostname(), connection\-::request\-\_\-count, request\-::request\-\_\-line, request\-\_\-uri\-\_\-is\-\_\-valid\-\_\-char(), connection\-::response, server\-::split\-\_\-vals, server\-::srvconf, T\-Y\-P\-E\-\_\-\-S\-T\-R\-I\-N\-G, request\-::uri, array\-::used, and data\-\_\-string\-::value.



Referenced by connection\-\_\-state\-\_\-machine().

