\hypertarget{http__chunk_8c}{\section{http\-\_\-chunk.\-c File Reference}
\label{http__chunk_8c}\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}}
}
{\ttfamily \#include \char`\"{}first.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}server.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}chunk.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}http\-\_\-chunk.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stat\-\_\-cache.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}log.\-h\char`\"{}}\\*
{\ttfamily \#include $<$sys/types.\-h$>$}\\*
{\ttfamily \#include $<$sys/stat.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{http__chunk_8c_ab3c652656ba2acab6d88182da4bab2f2}{http\-\_\-chunk\-\_\-append\-\_\-len} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, uintmax\-\_\-t len)
\item 
static int \hyperlink{http__chunk_8c_a6f68b1280dc3efa5ce2a608a1bb27fa8}{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$fn, struct stat $\ast$st)
\item 
static void \hyperlink{http__chunk_8c_aacd81764156ef173537b5d6ae957199c}{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$fn, int fd, off\-\_\-t offset, off\-\_\-t len)
\item 
int \hyperlink{http__chunk_8c_a61f165ca2067e555e1b52d30a07f1d37}{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$fn, off\-\_\-t offset, off\-\_\-t len)
\item 
int \hyperlink{http__chunk_8c_ae15cd4c2b901020f7cdcabda45f21f3d}{http\-\_\-chunk\-\_\-append\-\_\-file} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$fn)
\item 
static int \hyperlink{http__chunk_8c_a9953dfe3d0e3a61a16108954cc2e2c54}{http\-\_\-chunk\-\_\-append\-\_\-to\-\_\-tempfile} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, const char $\ast$mem, size\-\_\-t len)
\item 
static int \hyperlink{http__chunk_8c_acb762cb97a255dce5a4efee52663f770}{http\-\_\-chunk\-\_\-append\-\_\-data} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$b, const char $\ast$mem, size\-\_\-t len)
\item 
int \hyperlink{http__chunk_8c_a13c06534b688737d920c32869685d4a4}{http\-\_\-chunk\-\_\-append\-\_\-buffer} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structbuffer}{buffer} $\ast$mem)
\item 
int \hyperlink{http__chunk_8c_aff95b3406ac2163fc87aa2ae69b432d3}{http\-\_\-chunk\-\_\-append\-\_\-mem} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, const char $\ast$mem, size\-\_\-t len)
\item 
void \hyperlink{http__chunk_8c_ac0db0a63ace7a18074e811f39c39c75c}{http\-\_\-chunk\-\_\-close} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{http__chunk_8c_a13c06534b688737d920c32869685d4a4}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-buffer@{http\-\_\-chunk\-\_\-append\-\_\-buffer}}
\index{http\-\_\-chunk\-\_\-append\-\_\-buffer@{http\-\_\-chunk\-\_\-append\-\_\-buffer}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-buffer}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-chunk\-\_\-append\-\_\-buffer (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{mem}
\end{DoxyParamCaption}
)}}\label{http__chunk_8c_a13c06534b688737d920c32869685d4a4}


References buffer\-\_\-string\-\_\-length(), force\-\_\-assert, and http\-\_\-chunk\-\_\-append\-\_\-data().



Referenced by cgi\-\_\-demux\-\_\-response(), cgi\-\_\-handle\-\_\-fdevent(), connection\-\_\-handle\-\_\-write\-\_\-prepare(), fcgi\-\_\-demux\-\_\-response(), proxy\-\_\-demux\-\_\-response(), and scgi\-\_\-demux\-\_\-response().

\hypertarget{http__chunk_8c_acb762cb97a255dce5a4efee52663f770}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-data@{http\-\_\-chunk\-\_\-append\-\_\-data}}
\index{http\-\_\-chunk\-\_\-append\-\_\-data@{http\-\_\-chunk\-\_\-append\-\_\-data}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}static int http\-\_\-chunk\-\_\-append\-\_\-data (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{b, }
\item[{const char $\ast$}]{mem, }
\item[{size\-\_\-t}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{http__chunk_8c_acb762cb97a255dce5a4efee52663f770}


References chunkqueue\-::bytes\-\_\-in, chunkqueue\-::bytes\-\_\-out, chunkqueue\-\_\-append\-\_\-buffer(), chunkqueue\-\_\-append\-\_\-mem(), connection\-::conf, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, F\-D\-E\-V\-E\-N\-T\-\_\-\-S\-T\-R\-E\-A\-M\-\_\-\-R\-E\-S\-P\-O\-N\-S\-E\-\_\-\-B\-U\-F\-M\-I\-N, chunk\-::file, http\-\_\-chunk\-\_\-append\-\_\-len(), http\-\_\-chunk\-\_\-append\-\_\-to\-\_\-tempfile(), chunk\-::is\-\_\-temp, chunkqueue\-::last, buffer\-::ptr, connection\-::response, specific\-\_\-config\-::stream\-\_\-response\-\_\-body, response\-::transfer\-\_\-encoding, chunk\-::type, and connection\-::write\-\_\-queue.



Referenced by http\-\_\-chunk\-\_\-append\-\_\-buffer(), and http\-\_\-chunk\-\_\-append\-\_\-mem().

\hypertarget{http__chunk_8c_ae15cd4c2b901020f7cdcabda45f21f3d}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-file@{http\-\_\-chunk\-\_\-append\-\_\-file}}
\index{http\-\_\-chunk\-\_\-append\-\_\-file@{http\-\_\-chunk\-\_\-append\-\_\-file}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-file}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-chunk\-\_\-append\-\_\-file (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{fn}
\end{DoxyParamCaption}
)}}\label{http__chunk_8c_ae15cd4c2b901020f7cdcabda45f21f3d}


References http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range(), and http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat().



Referenced by connection\-\_\-handle\-\_\-write\-\_\-prepare(), and http\-\_\-response\-\_\-send\-\_\-file().

\hypertarget{http__chunk_8c_aacd81764156ef173537b5d6ae957199c}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range@{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range}}
\index{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range@{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range}]{\setlength{\rightskip}{0pt plus 5cm}static void http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{fn, }
\item[{int}]{fd, }
\item[{off\-\_\-t}]{offset, }
\item[{off\-\_\-t}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{http__chunk_8c_aacd81764156ef173537b5d6ae957199c}


References chunkqueue\-\_\-append\-\_\-file\-\_\-fd(), chunkqueue\-\_\-append\-\_\-mem(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, http\-\_\-chunk\-\_\-append\-\_\-len(), connection\-::response, response\-::transfer\-\_\-encoding, and connection\-::write\-\_\-queue.



Referenced by http\-\_\-chunk\-\_\-append\-\_\-file(), and http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range().

\hypertarget{http__chunk_8c_a6f68b1280dc3efa5ce2a608a1bb27fa8}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat@{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat}}
\index{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat@{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat}]{\setlength{\rightskip}{0pt plus 5cm}static int http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{fn, }
\item[{struct stat $\ast$}]{st}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{http__chunk_8c_a6f68b1280dc3efa5ce2a608a1bb27fa8}


References connection\-::conf, specific\-\_\-config\-::follow\-\_\-symlink, H\-A\-N\-D\-L\-E\-R\-\_\-\-E\-R\-R\-O\-R, stat\-\_\-cache\-\_\-get\-\_\-entry(), and stat\-\_\-cache\-\_\-open\-\_\-rdonly\-\_\-fstat().



Referenced by http\-\_\-chunk\-\_\-append\-\_\-file(), and http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range().

\hypertarget{http__chunk_8c_a61f165ca2067e555e1b52d30a07f1d37}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range@{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range}}
\index{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range@{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-range (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf buffer} $\ast$}]{fn, }
\item[{off\-\_\-t}]{offset, }
\item[{off\-\_\-t}]{len}
\end{DoxyParamCaption}
)}}\label{http__chunk_8c_a61f165ca2067e555e1b52d30a07f1d37}


References http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range(), and http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-open\-\_\-fstat().



Referenced by fcgi\-\_\-response\-\_\-parse(), magnet\-\_\-attach\-\_\-content(), and U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C().

\hypertarget{http__chunk_8c_ab3c652656ba2acab6d88182da4bab2f2}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-len@{http\-\_\-chunk\-\_\-append\-\_\-len}}
\index{http\-\_\-chunk\-\_\-append\-\_\-len@{http\-\_\-chunk\-\_\-append\-\_\-len}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-len}]{\setlength{\rightskip}{0pt plus 5cm}static void http\-\_\-chunk\-\_\-append\-\_\-len (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{uintmax\-\_\-t}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{http__chunk_8c_ab3c652656ba2acab6d88182da4bab2f2}
the H\-T\-T\-P chunk-\/\-A\-P\-I 

References buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-append\-\_\-uint\-\_\-hex(), buffer\-\_\-string\-\_\-set\-\_\-length(), chunkqueue\-\_\-append\-\_\-buffer(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, force\-\_\-assert, server\-::tmp\-\_\-chunk\-\_\-len, and connection\-::write\-\_\-queue.



Referenced by http\-\_\-chunk\-\_\-append\-\_\-data(), and http\-\_\-chunk\-\_\-append\-\_\-file\-\_\-fd\-\_\-range().

\hypertarget{http__chunk_8c_aff95b3406ac2163fc87aa2ae69b432d3}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-mem@{http\-\_\-chunk\-\_\-append\-\_\-mem}}
\index{http\-\_\-chunk\-\_\-append\-\_\-mem@{http\-\_\-chunk\-\_\-append\-\_\-mem}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-mem}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-chunk\-\_\-append\-\_\-mem (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{const char $\ast$}]{mem, }
\item[{size\-\_\-t}]{len}
\end{DoxyParamCaption}
)}}\label{http__chunk_8c_aff95b3406ac2163fc87aa2ae69b432d3}


References force\-\_\-assert, and http\-\_\-chunk\-\_\-append\-\_\-data().



Referenced by cgi\-\_\-demux\-\_\-response(), proxy\-\_\-demux\-\_\-response(), scgi\-\_\-demux\-\_\-response(), and U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C().

\hypertarget{http__chunk_8c_a9953dfe3d0e3a61a16108954cc2e2c54}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-append\-\_\-to\-\_\-tempfile@{http\-\_\-chunk\-\_\-append\-\_\-to\-\_\-tempfile}}
\index{http\-\_\-chunk\-\_\-append\-\_\-to\-\_\-tempfile@{http\-\_\-chunk\-\_\-append\-\_\-to\-\_\-tempfile}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-append\-\_\-to\-\_\-tempfile}]{\setlength{\rightskip}{0pt plus 5cm}static int http\-\_\-chunk\-\_\-append\-\_\-to\-\_\-tempfile (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{const char $\ast$}]{mem, }
\item[{size\-\_\-t}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{http__chunk_8c_a9953dfe3d0e3a61a16108954cc2e2c54}


References buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-append\-\_\-uint\-\_\-hex(), buffer\-\_\-string\-\_\-set\-\_\-length(), chunkqueue\-\_\-append\-\_\-mem\-\_\-to\-\_\-tempfile(), C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, connection\-::response, server\-::tmp\-\_\-chunk\-\_\-len, response\-::transfer\-\_\-encoding, and connection\-::write\-\_\-queue.



Referenced by http\-\_\-chunk\-\_\-append\-\_\-data().

\hypertarget{http__chunk_8c_ac0db0a63ace7a18074e811f39c39c75c}{\index{http\-\_\-chunk.\-c@{http\-\_\-chunk.\-c}!http\-\_\-chunk\-\_\-close@{http\-\_\-chunk\-\_\-close}}
\index{http\-\_\-chunk\-\_\-close@{http\-\_\-chunk\-\_\-close}!http_chunk.c@{http\-\_\-chunk.\-c}}
\subsubsection[{http\-\_\-chunk\-\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}void http\-\_\-chunk\-\_\-close (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{http__chunk_8c_ac0db0a63ace7a18074e811f39c39c75c}


References chunkqueue\-\_\-append\-\_\-mem(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, force\-\_\-assert, connection\-::response, response\-::transfer\-\_\-encoding, U\-N\-U\-S\-E\-D, and connection\-::write\-\_\-queue.



Referenced by http\-\_\-response\-\_\-backend\-\_\-done().

