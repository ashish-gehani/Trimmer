\hypertarget{mod__cml_8c}{\section{mod\-\_\-cml.\-c File Reference}
\label{mod__cml_8c}\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}}
}
{\ttfamily \#include \char`\"{}first.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}buffer.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}server.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}log.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}plugin.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}response.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mod\-\_\-cml.\-h\char`\"{}}\\*
{\ttfamily \#include $<$sys/stat.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mod__cml_8c_a20876ec7c0c844d0e0c1628528bbb8da}{P\-A\-T\-C\-H}(x)~p-\/$>$conf.\-x = s-\/$>$x;
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{mod__cml_8c_a1a7ba16c032449e72ad7392e9e07b1bd}{I\-N\-I\-T\-\_\-\-F\-U\-N\-C} (mod\-\_\-cml\-\_\-init)
\item 
\hyperlink{mod__cml_8c_ab4b9ebd8cdc2af27a22e84739b8b944f}{F\-R\-E\-E\-\_\-\-F\-U\-N\-C} (mod\-\_\-cml\-\_\-free)
\item 
\hyperlink{mod__cml_8c_a87287f82b4df832e666c68453b0410dc}{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C} (mod\-\_\-cml\-\_\-set\-\_\-defaults)
\item 
static int \hyperlink{mod__cml_8c_ae87ea854b6916bc5665955c84fff6ded}{mod\-\_\-cml\-\_\-patch\-\_\-connection} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structplugin__data}{plugin\-\_\-data} $\ast$p)
\item 
static int \hyperlink{mod__cml_8c_a21beb3852dba7e5a86b29ad1d3fed53b}{cache\-\_\-call\-\_\-lua} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structplugin__data}{plugin\-\_\-data} $\ast$p, \hyperlink{structbuffer}{buffer} $\ast$cml\-\_\-file)
\item 
\hyperlink{mod__cml_8c_a9c3f13d3293ddb2f26e8a394399ee5fb}{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C} (mod\-\_\-cml\-\_\-power\-\_\-magnet)
\item 
\hyperlink{mod__cml_8c_a7bc30353edf895d99fd5bff7c8536216}{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C} (mod\-\_\-cml\-\_\-is\-\_\-handled)
\item 
int \hyperlink{mod__cml_8c_a9186e8473d1782b78ce3ad37127c5940}{mod\-\_\-cml\-\_\-plugin\-\_\-init} (\hyperlink{structplugin}{plugin} $\ast$p)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{mod__cml_8c_a20876ec7c0c844d0e0c1628528bbb8da}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!P\-A\-T\-C\-H@{P\-A\-T\-C\-H}}
\index{P\-A\-T\-C\-H@{P\-A\-T\-C\-H}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{P\-A\-T\-C\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\-A\-T\-C\-H(
\begin{DoxyParamCaption}
\item[{}]{x}
\end{DoxyParamCaption}
)~p-\/$>$conf.\-x = s-\/$>$x;}}\label{mod__cml_8c_a20876ec7c0c844d0e0c1628528bbb8da}


Referenced by mod\-\_\-cml\-\_\-patch\-\_\-connection().



\subsection{Function Documentation}
\hypertarget{mod__cml_8c_a21beb3852dba7e5a86b29ad1d3fed53b}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!cache\-\_\-call\-\_\-lua@{cache\-\_\-call\-\_\-lua}}
\index{cache\-\_\-call\-\_\-lua@{cache\-\_\-call\-\_\-lua}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{cache\-\_\-call\-\_\-lua}]{\setlength{\rightskip}{0pt plus 5cm}static int cache\-\_\-call\-\_\-lua (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf plugin\-\_\-data} $\ast$}]{p, }
\item[{{\bf buffer} $\ast$}]{cml\-\_\-file}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__cml_8c_a21beb3852dba7e5a86b29ad1d3fed53b}


References plugin\-\_\-data\-::basedir, plugin\-\_\-data\-::baseurl, buffer\-\_\-copy\-\_\-buffer(), buffer\-\_\-string\-\_\-length(), buffer\-\_\-string\-\_\-set\-\_\-length(), cache\-\_\-parse\-\_\-lua(), request\-\_\-uri\-::path, physical\-::path, connection\-::physical, buffer\-::ptr, and connection\-::uri.



Referenced by U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C().

\hypertarget{mod__cml_8c_ab4b9ebd8cdc2af27a22e84739b8b944f}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!F\-R\-E\-E\-\_\-\-F\-U\-N\-C@{F\-R\-E\-E\-\_\-\-F\-U\-N\-C}}
\index{F\-R\-E\-E\-\_\-\-F\-U\-N\-C@{F\-R\-E\-E\-\_\-\-F\-U\-N\-C}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{F\-R\-E\-E\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}F\-R\-E\-E\-\_\-\-F\-U\-N\-C (
\begin{DoxyParamCaption}
\item[{mod\-\_\-cml\-\_\-free}]{}
\end{DoxyParamCaption}
)}}\label{mod__cml_8c_ab4b9ebd8cdc2af27a22e84739b8b944f}


References array\-\_\-free(), plugin\-\_\-data\-::basedir, plugin\-\_\-data\-::baseurl, buffer\-\_\-free(), plugin\-\_\-data\-::config\-\_\-storage, plugin\-\_\-config\-::ext, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, plugin\-\_\-config\-::mc\-\_\-hosts, plugin\-\_\-config\-::mc\-\_\-namespace, plugin\-\_\-config\-::power\-\_\-magnet, plugin\-\_\-data\-::trigger\-\_\-handler, and U\-N\-U\-S\-E\-D.

\hypertarget{mod__cml_8c_a1a7ba16c032449e72ad7392e9e07b1bd}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!I\-N\-I\-T\-\_\-\-F\-U\-N\-C@{I\-N\-I\-T\-\_\-\-F\-U\-N\-C}}
\index{I\-N\-I\-T\-\_\-\-F\-U\-N\-C@{I\-N\-I\-T\-\_\-\-F\-U\-N\-C}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{I\-N\-I\-T\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}I\-N\-I\-T\-\_\-\-F\-U\-N\-C (
\begin{DoxyParamCaption}
\item[{mod\-\_\-cml\-\_\-init}]{}
\end{DoxyParamCaption}
)}}\label{mod__cml_8c_a1a7ba16c032449e72ad7392e9e07b1bd}


References plugin\-\_\-data\-::basedir, plugin\-\_\-data\-::baseurl, buffer\-\_\-init(), and plugin\-\_\-data\-::trigger\-\_\-handler.

\hypertarget{mod__cml_8c_ae87ea854b6916bc5665955c84fff6ded}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!mod\-\_\-cml\-\_\-patch\-\_\-connection@{mod\-\_\-cml\-\_\-patch\-\_\-connection}}
\index{mod\-\_\-cml\-\_\-patch\-\_\-connection@{mod\-\_\-cml\-\_\-patch\-\_\-connection}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{mod\-\_\-cml\-\_\-patch\-\_\-connection}]{\setlength{\rightskip}{0pt plus 5cm}static int mod\-\_\-cml\-\_\-patch\-\_\-connection (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf plugin\-\_\-data} $\ast$}]{p}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__cml_8c_ae87ea854b6916bc5665955c84fff6ded}


References buffer\-\_\-is\-\_\-equal\-\_\-string(), config\-\_\-check\-\_\-cond(), server\-::config\-\_\-context, plugin\-\_\-data\-::config\-\_\-storage, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, array\-::data, P\-A\-T\-C\-H, array\-::used, and data\-\_\-config\-::value.



Referenced by U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C().

\hypertarget{mod__cml_8c_a9186e8473d1782b78ce3ad37127c5940}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!mod\-\_\-cml\-\_\-plugin\-\_\-init@{mod\-\_\-cml\-\_\-plugin\-\_\-init}}
\index{mod\-\_\-cml\-\_\-plugin\-\_\-init@{mod\-\_\-cml\-\_\-plugin\-\_\-init}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{mod\-\_\-cml\-\_\-plugin\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int mod\-\_\-cml\-\_\-plugin\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf plugin} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{mod__cml_8c_a9186e8473d1782b78ce3ad37127c5940}


References buffer\-\_\-init\-\_\-string(), plugin\-::cleanup, plugin\-::data, plugin\-::handle\-\_\-physical, plugin\-::handle\-\_\-subrequest\-\_\-start, plugin\-::init, plugin\-::name, plugin\-::set\-\_\-defaults, and plugin\-::version.

\hypertarget{mod__cml_8c_a87287f82b4df832e666c68453b0410dc}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C@{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C}}
\index{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C@{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C (
\begin{DoxyParamCaption}
\item[{mod\-\_\-cml\-\_\-set\-\_\-defaults}]{}
\end{DoxyParamCaption}
)}}\label{mod__cml_8c_a87287f82b4df832e666c68453b0410dc}


References array\-\_\-init(), buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-free(), buffer\-\_\-init(), config\-\_\-insert\-\_\-values\-\_\-global(), plugin\-\_\-data\-::config\-\_\-storage, C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, config\-\_\-values\-\_\-t\-::destination, plugin\-\_\-config\-::ext, H\-A\-N\-D\-L\-E\-R\-\_\-\-E\-R\-R\-O\-R, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, log\-\_\-error\-\_\-write(), T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-A\-R\-R\-A\-Y, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-S\-C\-O\-P\-E\-\_\-\-C\-O\-N\-N\-E\-C\-T\-I\-O\-N, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-S\-C\-O\-P\-E\-\_\-\-S\-E\-R\-V\-E\-R, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-S\-C\-O\-P\-E\-\_\-\-U\-N\-S\-E\-T, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-S\-T\-R\-I\-N\-G, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-U\-N\-S\-E\-T, data\-\_\-string\-::value, and data\-\_\-config\-::value.

\hypertarget{mod__cml_8c_a9c3f13d3293ddb2f26e8a394399ee5fb}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C@{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C}}
\index{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C@{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C (
\begin{DoxyParamCaption}
\item[{mod\-\_\-cml\-\_\-power\-\_\-magnet}]{}
\end{DoxyParamCaption}
)}}\label{mod__cml_8c_a9c3f13d3293ddb2f26e8a394399ee5fb}


References plugin\-\_\-data\-::basedir, plugin\-\_\-data\-::baseurl, buffer\-\_\-reset(), buffer\-\_\-string\-\_\-is\-\_\-empty(), cache\-\_\-call\-\_\-lua(), plugin\-\_\-data\-::conf, H\-A\-N\-D\-L\-E\-R\-\_\-\-C\-O\-M\-E\-B\-A\-C\-K, H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-I\-N\-I\-S\-H\-E\-D, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, log\-\_\-error\-\_\-write(), mod\-\_\-cml\-\_\-patch\-\_\-connection(), plugin\-\_\-config\-::power\-\_\-magnet, and plugin\-\_\-data\-::trigger\-\_\-handler.

\hypertarget{mod__cml_8c_a7bc30353edf895d99fd5bff7c8536216}{\index{mod\-\_\-cml.\-c@{mod\-\_\-cml.\-c}!U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C@{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C}}
\index{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C@{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C}!mod_cml.c@{mod\-\_\-cml.\-c}}
\subsubsection[{U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}U\-R\-I\-H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-U\-N\-C (
\begin{DoxyParamCaption}
\item[{mod\-\_\-cml\-\_\-is\-\_\-handled}]{}
\end{DoxyParamCaption}
)}}\label{mod__cml_8c_a7bc30353edf895d99fd5bff7c8536216}


References plugin\-\_\-data\-::basedir, plugin\-\_\-data\-::baseurl, buffer\-\_\-is\-\_\-equal\-\_\-right\-\_\-len(), buffer\-\_\-reset(), buffer\-\_\-string\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-length(), cache\-\_\-call\-\_\-lua(), plugin\-\_\-data\-::conf, plugin\-\_\-config\-::ext, H\-A\-N\-D\-L\-E\-R\-\_\-\-C\-O\-M\-E\-B\-A\-C\-K, H\-A\-N\-D\-L\-E\-R\-\_\-\-E\-R\-R\-O\-R, H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-I\-N\-I\-S\-H\-E\-D, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, log\-\_\-error\-\_\-write(), mod\-\_\-cml\-\_\-patch\-\_\-connection(), physical\-::path, plugin\-\_\-data\-::physical, and plugin\-\_\-data\-::trigger\-\_\-handler.

