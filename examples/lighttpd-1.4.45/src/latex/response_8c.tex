\hypertarget{response_8c}{\section{response.\-c File Reference}
\label{response_8c}\index{response.\-c@{response.\-c}}
}
{\ttfamily \#include \char`\"{}first.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}response.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}keyvalue.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}log.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stat\-\_\-cache.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}chunk.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}configfile.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}plugin.\-h\char`\"{}}\\*
{\ttfamily \#include $<$sys/types.\-h$>$}\\*
{\ttfamily \#include $<$sys/stat.\-h$>$}\\*
{\ttfamily \#include $<$limits.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$ctype.\-h$>$}\\*
{\ttfamily \#include $<$assert.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include \char`\"{}sys-\/socket.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{response_8c_ad53c7010ce671b4065d3cd8cee177498}{http\-\_\-response\-\_\-write\-\_\-header} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\item 
\hyperlink{settings_8h_a2a8ffc3e29980db202f39ab85ab7e98e}{handler\-\_\-t} \hyperlink{response_8c_af0d193ff05f79b7130f4684a3f205896}{http\-\_\-response\-\_\-prepare} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{response_8c_af0d193ff05f79b7130f4684a3f205896}{\index{response.\-c@{response.\-c}!http\-\_\-response\-\_\-prepare@{http\-\_\-response\-\_\-prepare}}
\index{http\-\_\-response\-\_\-prepare@{http\-\_\-response\-\_\-prepare}!response.c@{response.\-c}}
\subsubsection[{http\-\_\-response\-\_\-prepare}]{\setlength{\rightskip}{0pt plus 5cm}{\bf handler\-\_\-t} http\-\_\-response\-\_\-prepare (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{response_8c_af0d193ff05f79b7130f4684a3f205896}
prepare strings


\begin{DoxyItemize}
\item uri.\-path\-\_\-raw
\item uri.\-path (secure)
\item uri.\-query
\end{DoxyItemize}

Name according to R\-F\-C 2396


\begin{DoxyItemize}
\item scheme
\item authority
\item path
\item query
\end{DoxyItemize}

(scheme)\-://(authority)(path)?(query)\#fragment

their might be a fragment which has to be cut away

extract query string from \hyperlink{structrequest_aef1dc716db5d4c8e7a6f9bbe97951ed9}{request.\-uri}

call plugins


\begin{DoxyItemize}
\item based on the raw U\-R\-L
\end{DoxyItemize}

call plugins


\begin{DoxyItemize}
\item based on the clean U\-R\-L
\end{DoxyItemize}

create physical filename -\/$>$ \hyperlink{structphysical_ab8904c540bcd84c8a18ec85ab198910d}{physical.\-path} = docroot + rel\-\_\-path

References specific\-\_\-config\-::allow\-\_\-http11, request\-\_\-uri\-::authority, physical\-::basedir, buffer\-\_\-append\-\_\-slash(), buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-copy\-\_\-buffer(), buffer\-\_\-copy\-\_\-string(), buffer\-\_\-copy\-\_\-string\-\_\-len(), buffer\-\_\-is\-\_\-empty(), buffer\-\_\-path\-\_\-simplify(), buffer\-\_\-reset(), buffer\-\_\-string\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-length(), buffer\-\_\-string\-\_\-set\-\_\-length(), buffer\-\_\-to\-\_\-lower(), buffer\-\_\-urldecode\-\_\-path(), chunkqueue\-\_\-reset(), C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-C\-O\-O\-K\-I\-E, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-H\-O\-S\-T, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-L\-A\-N\-G\-U\-A\-G\-E, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-R\-E\-F\-E\-R\-E\-R, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-R\-E\-M\-O\-T\-E\-\_\-\-I\-P, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-R\-E\-Q\-U\-E\-S\-T\-\_\-\-M\-E\-T\-H\-O\-D, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-S\-C\-H\-E\-M\-E, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-U\-R\-L, C\-O\-M\-P\-\_\-\-H\-T\-T\-P\-\_\-\-U\-S\-E\-R\-\_\-\-A\-G\-E\-N\-T, C\-O\-M\-P\-\_\-\-S\-E\-R\-V\-E\-R\-\_\-\-S\-O\-C\-K\-E\-T, connection\-::conditional\-\_\-is\-\_\-valid, connection\-::conf, config\-\_\-cond\-\_\-cache\-\_\-reset(), config\-\_\-patch\-\_\-connection(), config\-\_\-setup\-\_\-connection(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, request\-::content\-\_\-length, D\-I\-R\-E\-C\-T, physical\-::doc\-\_\-root, specific\-\_\-config\-::document\-\_\-root, connection\-::file\-\_\-finished, specific\-\_\-config\-::follow\-\_\-symlink, specific\-\_\-config\-::force\-\_\-lowercase\-\_\-filenames, H\-A\-N\-D\-L\-E\-R\-\_\-\-C\-O\-M\-E\-B\-A\-C\-K, H\-A\-N\-D\-L\-E\-R\-\_\-\-E\-R\-R\-O\-R, H\-A\-N\-D\-L\-E\-R\-\_\-\-F\-I\-N\-I\-S\-H\-E\-D, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, H\-A\-N\-D\-L\-E\-R\-\_\-\-W\-A\-I\-T\-\_\-\-F\-O\-R\-\_\-\-E\-V\-E\-N\-T, request\-::http\-\_\-host, request\-::http\-\_\-method, H\-T\-T\-P\-\_\-\-M\-E\-T\-H\-O\-D\-\_\-\-O\-P\-T\-I\-O\-N\-S, http\-\_\-response\-\_\-redirect\-\_\-to\-\_\-directory(), connection\-::http\-\_\-status, request\-::http\-\_\-version, H\-T\-T\-P\-\_\-\-V\-E\-R\-S\-I\-O\-N\-\_\-1\-\_\-0, server\-\_\-socket\-::is\-\_\-ssl, connection\-::keep\-\_\-alive, specific\-\_\-config\-::log\-\_\-condition\-\_\-handling, log\-\_\-error\-\_\-write(), specific\-\_\-config\-::log\-\_\-file\-\_\-not\-\_\-found, specific\-\_\-config\-::log\-\_\-request\-\_\-handling, specific\-\_\-config\-::max\-\_\-request\-\_\-size, connection\-::mode, request\-\_\-uri\-::path, physical\-::path, request\-\_\-uri\-::path\-\_\-raw, request\-::pathinfo, connection\-::physical, plugins\-\_\-call\-\_\-handle\-\_\-docroot(), plugins\-\_\-call\-\_\-handle\-\_\-physical(), plugins\-\_\-call\-\_\-handle\-\_\-subrequest(), plugins\-\_\-call\-\_\-handle\-\_\-subrequest\-\_\-start(), plugins\-\_\-call\-\_\-handle\-\_\-uri\-\_\-clean(), plugins\-\_\-call\-\_\-handle\-\_\-uri\-\_\-raw(), buffer\-::ptr, request\-\_\-uri\-::query, physical\-::rel\-\_\-path, connection\-::request, response\-\_\-header\-\_\-insert(), request\-\_\-uri\-::scheme, connection\-::server\-\_\-name, connection\-::srv\-\_\-socket, specific\-\_\-config\-::ssl\-\_\-verifyclient, stat\-\_\-cache\-\_\-entry\-::st, stat\-\_\-cache\-\_\-get\-\_\-entry(), server\-::tmp\-\_\-buf, request\-::uri, connection\-::uri, buffer\-::used, and connection\-::write\-\_\-queue.



Referenced by connection\-\_\-state\-\_\-machine().

\hypertarget{response_8c_ad53c7010ce671b4065d3cd8cee177498}{\index{response.\-c@{response.\-c}!http\-\_\-response\-\_\-write\-\_\-header@{http\-\_\-response\-\_\-write\-\_\-header}}
\index{http\-\_\-response\-\_\-write\-\_\-header@{http\-\_\-response\-\_\-write\-\_\-header}!response.c@{response.\-c}}
\subsubsection[{http\-\_\-response\-\_\-write\-\_\-header}]{\setlength{\rightskip}{0pt plus 5cm}int http\-\_\-response\-\_\-write\-\_\-header (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con}
\end{DoxyParamCaption}
)}}\label{response_8c_ad53c7010ce671b4065d3cd8cee177498}


References buffer\-\_\-append\-\_\-int(), buffer\-\_\-append\-\_\-strftime(), buffer\-\_\-append\-\_\-string(), buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-append\-\_\-string\-\_\-encoded(), buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-copy\-\_\-string\-\_\-len(), buffer\-\_\-free(), buffer\-\_\-init(), buffer\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-length(), buffer\-\_\-string\-\_\-prepare\-\_\-copy(), connection\-::bytes\-\_\-header, chunkqueue\-\_\-prepend\-\_\-buffer(), connection\-::conf, C\-O\-N\-S\-T\-\_\-\-B\-U\-F\-\_\-\-L\-E\-N, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, server\-::cur\-\_\-ts, array\-::data, E\-N\-C\-O\-D\-I\-N\-G\-\_\-\-H\-T\-T\-P\-\_\-\-H\-E\-A\-D\-E\-R, get\-\_\-http\-\_\-status\-\_\-name(), response\-::headers, connection\-::http\-\_\-status, request\-::http\-\_\-version, H\-T\-T\-P\-\_\-\-V\-E\-R\-S\-I\-O\-N\-\_\-1\-\_\-1, connection\-::keep\-\_\-alive, connection\-::keep\-\_\-alive\-\_\-idle, server\-::last\-\_\-generated\-\_\-date\-\_\-ts, log\-\_\-error\-\_\-write(), specific\-\_\-config\-::log\-\_\-response\-\_\-header, specific\-\_\-config\-::max\-\_\-keep\-\_\-alive\-\_\-idle, specific\-\_\-config\-::max\-\_\-keep\-\_\-alive\-\_\-requests, connection\-::request, connection\-::request\-\_\-count, connection\-::response, response\-\_\-header\-\_\-overwrite(), specific\-\_\-config\-::server\-\_\-tag, response\-::transfer\-\_\-encoding, server\-::ts\-\_\-date\-\_\-str, array\-::used, data\-\_\-string\-::value, and connection\-::write\-\_\-queue.



Referenced by connection\-\_\-handle\-\_\-write\-\_\-prepare().

