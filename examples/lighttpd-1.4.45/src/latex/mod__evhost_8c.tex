\hypertarget{mod__evhost_8c}{\section{mod\-\_\-evhost.\-c File Reference}
\label{mod__evhost_8c}\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}}
}
{\ttfamily \#include \char`\"{}first.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}plugin.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}log.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}response.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stat\-\_\-cache.\-h\char`\"{}}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$ctype.\-h$>$}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structplugin__config}{plugin\-\_\-config}
\item 
struct \hyperlink{structplugin__data}{plugin\-\_\-data}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mod__evhost_8c_a20876ec7c0c844d0e0c1628528bbb8da}{P\-A\-T\-C\-H}(x)~p-\/$>$conf.\-x = s-\/$>$x;
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{mod__evhost_8c_aa87c0ad1a351924609cd309b83c2c05f}{I\-N\-I\-T\-\_\-\-F\-U\-N\-C} (mod\-\_\-evhost\-\_\-init)
\item 
\hyperlink{mod__evhost_8c_afa0cc5ae5524aa5e58e132e6c8681ec0}{F\-R\-E\-E\-\_\-\-F\-U\-N\-C} (mod\-\_\-evhost\-\_\-free)
\item 
static int \hyperlink{mod__evhost_8c_ac91b308d7aaa6b0a000bcb4f21a1dd98}{mod\-\_\-evhost\-\_\-parse\-\_\-pattern} (\hyperlink{structplugin__config}{plugin\-\_\-config} $\ast$s)
\item 
\hyperlink{mod__evhost_8c_a1e7380481345002ef49247de3f9ec578}{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C} (mod\-\_\-evhost\-\_\-set\-\_\-defaults)
\item 
static int \hyperlink{mod__evhost_8c_a30d6b2f2845a531e3cc08d0d8e36f609}{mod\-\_\-evhost\-\_\-parse\-\_\-host} (\hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structarray}{array} $\ast$host)
\item 
static int \hyperlink{mod__evhost_8c_a411bb795bc4b3069af5e985ad70c3b49}{mod\-\_\-evhost\-\_\-patch\-\_\-connection} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, \hyperlink{structplugin__data}{plugin\-\_\-data} $\ast$p)
\item 
static \hyperlink{settings_8h_a2a8ffc3e29980db202f39ab85ab7e98e}{handler\-\_\-t} \hyperlink{mod__evhost_8c_a4d458211621efe64cb03e036f1d52f06}{mod\-\_\-evhost\-\_\-uri\-\_\-handler} (\hyperlink{structserver}{server} $\ast$srv, \hyperlink{structconnection}{connection} $\ast$con, void $\ast$p\-\_\-d)
\item 
int \hyperlink{mod__evhost_8c_a4d48f80d888d160681ef01a90fc50f54}{mod\-\_\-evhost\-\_\-plugin\-\_\-init} (\hyperlink{structplugin}{plugin} $\ast$p)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{mod__evhost_8c_a20876ec7c0c844d0e0c1628528bbb8da}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!P\-A\-T\-C\-H@{P\-A\-T\-C\-H}}
\index{P\-A\-T\-C\-H@{P\-A\-T\-C\-H}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{P\-A\-T\-C\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\-A\-T\-C\-H(
\begin{DoxyParamCaption}
\item[{}]{x}
\end{DoxyParamCaption}
)~p-\/$>$conf.\-x = s-\/$>$x;}}\label{mod__evhost_8c_a20876ec7c0c844d0e0c1628528bbb8da}


Referenced by mod\-\_\-evhost\-\_\-patch\-\_\-connection().



\subsection{Function Documentation}
\hypertarget{mod__evhost_8c_afa0cc5ae5524aa5e58e132e6c8681ec0}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!F\-R\-E\-E\-\_\-\-F\-U\-N\-C@{F\-R\-E\-E\-\_\-\-F\-U\-N\-C}}
\index{F\-R\-E\-E\-\_\-\-F\-U\-N\-C@{F\-R\-E\-E\-\_\-\-F\-U\-N\-C}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{F\-R\-E\-E\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}F\-R\-E\-E\-\_\-\-F\-U\-N\-C (
\begin{DoxyParamCaption}
\item[{mod\-\_\-evhost\-\_\-free}]{}
\end{DoxyParamCaption}
)}}\label{mod__evhost_8c_afa0cc5ae5524aa5e58e132e6c8681ec0}


References buffer\-\_\-free(), plugin\-\_\-data\-::config\-\_\-storage, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, plugin\-\_\-config\-::len, plugin\-\_\-config\-::path\-\_\-pieces, plugin\-\_\-config\-::path\-\_\-pieces\-\_\-raw, plugin\-\_\-data\-::tmp\-\_\-buf, and U\-N\-U\-S\-E\-D.

\hypertarget{mod__evhost_8c_aa87c0ad1a351924609cd309b83c2c05f}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!I\-N\-I\-T\-\_\-\-F\-U\-N\-C@{I\-N\-I\-T\-\_\-\-F\-U\-N\-C}}
\index{I\-N\-I\-T\-\_\-\-F\-U\-N\-C@{I\-N\-I\-T\-\_\-\-F\-U\-N\-C}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{I\-N\-I\-T\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}I\-N\-I\-T\-\_\-\-F\-U\-N\-C (
\begin{DoxyParamCaption}
\item[{mod\-\_\-evhost\-\_\-init}]{}
\end{DoxyParamCaption}
)}}\label{mod__evhost_8c_aa87c0ad1a351924609cd309b83c2c05f}


References buffer\-\_\-init(), and plugin\-\_\-data\-::tmp\-\_\-buf.

\hypertarget{mod__evhost_8c_a30d6b2f2845a531e3cc08d0d8e36f609}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!mod\-\_\-evhost\-\_\-parse\-\_\-host@{mod\-\_\-evhost\-\_\-parse\-\_\-host}}
\index{mod\-\_\-evhost\-\_\-parse\-\_\-host@{mod\-\_\-evhost\-\_\-parse\-\_\-host}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{mod\-\_\-evhost\-\_\-parse\-\_\-host}]{\setlength{\rightskip}{0pt plus 5cm}static int mod\-\_\-evhost\-\_\-parse\-\_\-host (
\begin{DoxyParamCaption}
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf array} $\ast$}]{host}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__evhost_8c_a30d6b2f2845a531e3cc08d0d8e36f609}
assign the different parts of the domain to array-\/indezes (sub2.\-sub1.\-domain.\-tld)
\begin{DoxyItemize}
\item \%0 -\/ domain.\-tld
\item \%1 -\/ tld
\item \%2 -\/ domain
\item \%3 -\/ sub1
\item ... 
\end{DoxyItemize}

References array\-\_\-insert\-\_\-unique(), request\-\_\-uri\-::authority, buffer\-\_\-append\-\_\-int(), buffer\-\_\-copy\-\_\-string\-\_\-len(), buffer\-\_\-string\-\_\-length(), C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, data\-\_\-string\-\_\-init(), buffer\-::ptr, connection\-::uri, and data\-\_\-string\-::value.



Referenced by mod\-\_\-evhost\-\_\-uri\-\_\-handler().

\hypertarget{mod__evhost_8c_ac91b308d7aaa6b0a000bcb4f21a1dd98}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!mod\-\_\-evhost\-\_\-parse\-\_\-pattern@{mod\-\_\-evhost\-\_\-parse\-\_\-pattern}}
\index{mod\-\_\-evhost\-\_\-parse\-\_\-pattern@{mod\-\_\-evhost\-\_\-parse\-\_\-pattern}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{mod\-\_\-evhost\-\_\-parse\-\_\-pattern}]{\setlength{\rightskip}{0pt plus 5cm}static int mod\-\_\-evhost\-\_\-parse\-\_\-pattern (
\begin{DoxyParamCaption}
\item[{{\bf plugin\-\_\-config} $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__evhost_8c_ac91b308d7aaa6b0a000bcb4f21a1dd98}


References buffer\-\_\-copy\-\_\-string\-\_\-len(), buffer\-\_\-init(), plugin\-\_\-config\-::len, light\-\_\-isdigit(), plugin\-\_\-config\-::path\-\_\-pieces, plugin\-\_\-config\-::path\-\_\-pieces\-\_\-raw, and buffer\-::ptr.



Referenced by S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C().

\hypertarget{mod__evhost_8c_a411bb795bc4b3069af5e985ad70c3b49}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!mod\-\_\-evhost\-\_\-patch\-\_\-connection@{mod\-\_\-evhost\-\_\-patch\-\_\-connection}}
\index{mod\-\_\-evhost\-\_\-patch\-\_\-connection@{mod\-\_\-evhost\-\_\-patch\-\_\-connection}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{mod\-\_\-evhost\-\_\-patch\-\_\-connection}]{\setlength{\rightskip}{0pt plus 5cm}static int mod\-\_\-evhost\-\_\-patch\-\_\-connection (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{{\bf plugin\-\_\-data} $\ast$}]{p}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__evhost_8c_a411bb795bc4b3069af5e985ad70c3b49}


References buffer\-\_\-is\-\_\-equal\-\_\-string(), config\-\_\-check\-\_\-cond(), server\-::config\-\_\-context, plugin\-\_\-data\-::config\-\_\-storage, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, array\-::data, P\-A\-T\-C\-H, array\-::used, and data\-\_\-config\-::value.



Referenced by mod\-\_\-evhost\-\_\-uri\-\_\-handler().

\hypertarget{mod__evhost_8c_a4d48f80d888d160681ef01a90fc50f54}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!mod\-\_\-evhost\-\_\-plugin\-\_\-init@{mod\-\_\-evhost\-\_\-plugin\-\_\-init}}
\index{mod\-\_\-evhost\-\_\-plugin\-\_\-init@{mod\-\_\-evhost\-\_\-plugin\-\_\-init}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{mod\-\_\-evhost\-\_\-plugin\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int mod\-\_\-evhost\-\_\-plugin\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf plugin} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{mod__evhost_8c_a4d48f80d888d160681ef01a90fc50f54}


References buffer\-\_\-init\-\_\-string(), plugin\-::cleanup, plugin\-::data, plugin\-::handle\-\_\-docroot, plugin\-::init, mod\-\_\-evhost\-\_\-uri\-\_\-handler(), plugin\-::name, plugin\-::set\-\_\-defaults, and plugin\-::version.

\hypertarget{mod__evhost_8c_a4d458211621efe64cb03e036f1d52f06}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!mod\-\_\-evhost\-\_\-uri\-\_\-handler@{mod\-\_\-evhost\-\_\-uri\-\_\-handler}}
\index{mod\-\_\-evhost\-\_\-uri\-\_\-handler@{mod\-\_\-evhost\-\_\-uri\-\_\-handler}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{mod\-\_\-evhost\-\_\-uri\-\_\-handler}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf handler\-\_\-t} mod\-\_\-evhost\-\_\-uri\-\_\-handler (
\begin{DoxyParamCaption}
\item[{{\bf server} $\ast$}]{srv, }
\item[{{\bf connection} $\ast$}]{con, }
\item[{void $\ast$}]{p\-\_\-d}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{mod__evhost_8c_a4d458211621efe64cb03e036f1d52f06}


References array\-\_\-free(), array\-\_\-get\-\_\-element(), array\-\_\-init(), request\-\_\-uri\-::authority, buffer\-\_\-append\-\_\-slash(), buffer\-\_\-append\-\_\-string\-\_\-buffer(), buffer\-\_\-append\-\_\-string\-\_\-len(), buffer\-\_\-copy\-\_\-buffer(), buffer\-\_\-reset(), buffer\-\_\-string\-\_\-is\-\_\-empty(), buffer\-\_\-string\-\_\-length(), plugin\-\_\-data\-::conf, C\-O\-N\-S\-T\-\_\-\-S\-T\-R\-\_\-\-L\-E\-N, physical\-::doc\-\_\-root, H\-A\-N\-D\-L\-E\-R\-\_\-\-E\-R\-R\-O\-R, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, plugin\-\_\-config\-::len, log\-\_\-error\-\_\-write(), mod\-\_\-evhost\-\_\-parse\-\_\-host(), mod\-\_\-evhost\-\_\-patch\-\_\-connection(), plugin\-\_\-config\-::path\-\_\-pieces, connection\-::physical, buffer\-::ptr, stat\-\_\-cache\-\_\-entry\-::st, stat\-\_\-cache\-\_\-get\-\_\-entry(), plugin\-\_\-data\-::tmp\-\_\-buf, connection\-::uri, and data\-\_\-string\-::value.



Referenced by mod\-\_\-evhost\-\_\-plugin\-\_\-init().

\hypertarget{mod__evhost_8c_a1e7380481345002ef49247de3f9ec578}{\index{mod\-\_\-evhost.\-c@{mod\-\_\-evhost.\-c}!S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C@{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C}}
\index{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C@{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C}!mod_evhost.c@{mod\-\_\-evhost.\-c}}
\subsubsection[{S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}S\-E\-T\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-F\-U\-N\-C (
\begin{DoxyParamCaption}
\item[{mod\-\_\-evhost\-\_\-set\-\_\-defaults}]{}
\end{DoxyParamCaption}
)}}\label{mod__evhost_8c_a1e7380481345002ef49247de3f9ec578}
\# \subsection*{define a pattern for the host url finding}

\subsection*{\%\% =$>$ \% sign}

\subsection*{\%0 =$>$ domain name + tld}

\subsection*{\%1 =$>$ tld}

\subsection*{\%2 =$>$ domain name without tld}

\subsection*{\%3 =$>$ subdomain 1 name}

\subsection*{\%4 =$>$ subdomain 2 name}

\subsection*{\-\_\- =$>$ fqdn (without port info)}

\# evhost.\-path-\/pattern = \char`\"{}/home/ckruse/dev/www/\%3/htdocs/\char`\"{}

References buffer\-\_\-init(), buffer\-\_\-string\-\_\-is\-\_\-empty(), config\-\_\-insert\-\_\-values\-\_\-global(), plugin\-\_\-data\-::config\-\_\-storage, config\-\_\-values\-\_\-t\-::destination, H\-A\-N\-D\-L\-E\-R\-\_\-\-E\-R\-R\-O\-R, H\-A\-N\-D\-L\-E\-R\-\_\-\-G\-O\-\_\-\-O\-N, log\-\_\-error\-\_\-write(), mod\-\_\-evhost\-\_\-parse\-\_\-pattern(), plugin\-\_\-config\-::path\-\_\-pieces\-\_\-raw, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-S\-C\-O\-P\-E\-\_\-\-C\-O\-N\-N\-E\-C\-T\-I\-O\-N, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-S\-C\-O\-P\-E\-\_\-\-S\-E\-R\-V\-E\-R, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-S\-C\-O\-P\-E\-\_\-\-U\-N\-S\-E\-T, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-S\-T\-R\-I\-N\-G, T\-\_\-\-C\-O\-N\-F\-I\-G\-\_\-\-U\-N\-S\-E\-T, and data\-\_\-config\-::value.

