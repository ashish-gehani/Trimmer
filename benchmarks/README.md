Running Trimmer on all applications with runbench script
=======

1) Build Trimmer on your machine along with the dependencies of the benchmark examples

2) Run `./runbench.py --sets="trimmer.set" --trimmer-opts=""`

3) Finally, run `bash reset.sh` before running the rubench script again. reset.sh deletes old executables and bitcode of applications to allow runbench script to be used again

The runbench.py script will run Trimmer on all applications that are enabled in the provided set and print the statistics (e.g. reductions in file size, instructions, functions, and memory instructions) in a table. To enable or disable (skip) examples in the trimmer set, modify trimmer.set to toggle the _enabled_ option (i.e. make true or false).

### Trimmer Options:
Trimmer can be run with different options such as loop-unroll, string-specialize and file-specialize. User can provide these options through _--trimmer-opts_. e.g if anyone is only interested in running Trimmer with loop-unroll pass, run this command `./runbench.py --sets="trimmer.set" --trimmer-opts="loop-unroll"`. Options available with trimmer can be found [here](https://github.com/ashish-gehani/Trimmer/blob/master/docs/options.md).

### Logging:
Logs generated by the runbench script are saved in the "Logs" folder in the running directory. To change the default directory for the log files, use the _--temp-dirs=\<dir\>_ flag. To disable logging, use the _--delete-temps_ flag. By default, debug messages of Trimmer are not printed. To activate this ouput, use: `export TRIMMER_DEBUG=Yes`. The messages will be printed in a `log.txt` file in the working directories of the examples. 

### Sample Output:
Program Reduction: (B:before and A:after Trimmer with default options)

Program         B Size     A Size   % Size Red    B Fun   A Fun   % Fun Red    B Ins    A Ins   % Ins Red   B Mem Ins   A Mem Ins   % Mem Ins Red
dnsproxy        18,952     14,696           22       19      15          21    1,073      488          54         397         150              62
mini_httpd      58,848     46,368           21       73      70           4    6,142    2,445          60       2,406         529              78
sans            39,528     35,328           10       87      88          -1    7,724    3,775          51       3,161         815              74
totd            84,728     76,440            9      193     183           5   17,390    8,639          50       7,386       1,938              73
thttpd          91,888     83,552            9      145     142           2   15,279    7,849          48       6,725       1,923              71
wget           431,368    426,872            1      792     834          -5   77,653   43,156          44      33,567       9,215              72
knockd          31,936     27,728           13       37      31          16    4,270    2,696          36       1,633         500              69
httping         58,272     29,344           49       69      43          37    7,426    1,763          76       3,055         342              88
bzip2          103,936     55,688           46      108      77          28   26,728    8,909          66      12,589       2,039              83
memcached       84,912     88,896           -4      181     170           6   17,652   11,864          32       7,552       2,542              66
aircrack-ng    124,096     85,264           31      102      65          36   21,241   11,205          47       8,494       2,647              68
gzip            76,024     40,760           46      118      66          44   12,985    4,783          63       5,271       1,437              72
netstat         98,480     57,216           41      153      93          39   13,245    5,225          60       4,503         983              78
airtun-ng       82,176     52,048           36      169     108          36   14,848    5,010          66       5,861       1,106              81
netperf        106,000     39,512           62      105      53          49   14,336    2,862          80       6,447         957              85
readelf        557,528    602,512           -8      457     550         -20   78,107    47,941         38      32,762       8,066              75
yices        1,774,528  1,408,896           20   11,628   9,161          21   409,127  168,857         58     198,360      33,325              83
curl           170,880    170,880           0       127     116           8    20,130   10,563         47       8,586       2,148              74
gprof        1,141,848    914,696           19    2,142   1,817          15   329,789  154,123         53     143,904      36,460              74
objdump      2,263,000  1,708,568           24    2,648   1,734          34   401,160  149,484         62     175,471      35,945              79
